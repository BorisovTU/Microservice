<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">
   <property name="now" value="sysdate" dbms="oracle"/>
   <changeSet id="BOSS-5832_create_table.xml" author="Geraskina" >

      <createTable tableName="DUSERLEBROKREPREQ_DBT" remarks="Таблица экземпляров запроса выпуска отчета брокера">
         <column name="T_ID"  type="NUMBER(10)" remarks="Уникальный идентификатор записи"/>
         <column name="T_QMESSLOGID"  type="NUMBER" remarks="Идентификатор запроса в таблице сообщений очередей q manager"/>
         <column name="T_GUIDREQ"  type="VARCHAR(100)" remarks="Идентификатор запроса GUID"/>
         <column name="T_STARTDATE"  type="DATE" remarks="Дата начала периода запроса отчета"/>
         <column name="T_ENDDATE"  type="DATE" remarks="Дата окончания периода запроса отчета"/>
         <column name="T_REQREGDATE"  type="DATE" remarks="Дата и время регистрации запроса"/>
         <column name="T_CLIENTCODE"  type="VARCHAR(100)" remarks="Код клиента"/>
         <column name="T_CONTRNUMBER"  type="VARCHAR(64)"  remarks="Код ДБО"/>
         <column name="T_PARTYID"  type="NUMBER(10)" remarks="Идентификатор клиента в СОФР"/>
         <column name="T_DLCONTRID"  type="NUMBER(10)" remarks="Идентификатор договора в СОФР"/>
         <column name="T_REQSYSDATE"  type="DATE" remarks="Системная дата создания. Дата и время создания записи в таблице"/>
         <column name="T_JSONSYSDATE"  type="DATE" remarks="Системная дата готовности json файла с данными. Дата и время готовности json файла с данными"/>
         <column name="T_REPNAME"  type="VARCHAR(100)" remarks="Наименование сформированного отчета"/>
         <column name="T_FACSIMILE"  type="VARCHAR2(30)" remarks="Логин для факсимиле"/>
         <column name="T_ERRORTEXT"  type="VARCHAR2(300 CHAR)" remarks="Текст ошибки"/>
         <column name="T_STATUS"  type="CHAR(1)" remarks="Статус формирования отчета в IPS. Y - pdf сформирован, N - получена ошибка"/>
         <column name="T_READYTIME"  type="TIMESTAMP" remarks="Дата и время готовности pdf-файла файла с отчетом"/>
      </createTable>

      <createIndex indexName="DUSERLEBROKREPREQ_DBT_IDX0" tableName="DUSERLEBROKREPREQ_DBT" unique="true" tablespace="INDX">
         <column name="T_ID"/>
      </createIndex>
      
      <createSequence sequenceName="DUSERLEBROKREPREQ_DBT_SEQ" startValue="1" maxValue="999999999999999999999999999" minValue="1" cacheSize="0"/>
      
   </changeSet>

</databaseChangeLog>
