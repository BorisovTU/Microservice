<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">
  <changeSet id="115_DEF-84380_insert_objkcode" author="Shvetsov">
    <insert tableName="DOBJKCODE_DBT">
      <column name="T_OBJECTTYPE" valueNumeric="9"/>
      <column name="T_CODEKIND" valueComputed="(select MAX(T_CODEKIND)+1 from DOBJKCODE_DBT where T_OBJECTTYPE = 9 and T_CODEKIND BETWEEN 0 AND 99)"/>
      <column name="T_NAME" value="Код на ММВБ для однодневных срочных контрактов"/>
      <column name="T_SHORTNAME" value="1DAY"/>
      <column name="T_MAXCODELEN" valueNumeric="35"/>
      <column name="T_CASESENSITIVE" valueComputed="chr(0)"/>
      <column name="T_DEFINITION" value="Код на ММВБ для однодневных срочных контрактов"/>
      <column name="T_MACROFILE" valueComputed="CHR(1)"/>
      <column name="T_MACROPROC" valueComputed="CHR(1)"/>
      <column name="T_DUPLICATE" valueComputed="CHR(0)"/>
    </insert>
  </changeSet>

  <changeSet id="115_DEF-84380_insert_objcode" author="Shvetsov">
    <insert tableName="DOBJCODE_DBT">
      <column name="T_OBJECTTYPE" valueNumeric="9"/>
      <column name="T_CODEKIND" valueComputed="(select T_CODEKIND from DOBJKCODE_DBT where T_OBJECTTYPE = 9 and T_SHORTNAME = '1DAY' )"/>
      <column name="T_OBJECTID" valueNumeric="314"/>
      <column name="T_CODE" value="GAZPF"/>
      <column name="T_STATE" valueNumeric="0"/>
      <column name="T_USERID" valueNumeric="1"/>
      <column name="T_AUTOKEY" valueNumeric="0"/>
      <column name="T_BANKCLOSEDATE" valueComputed="to_date('01.01.0001', 'dd.mm.yyyy')"/>
      <column name="T_NORMCODE" valueComputed="CHR(0)"/>
    </insert>

    <insert tableName="DOBJCODE_DBT">
      <column name="T_OBJECTTYPE" valueNumeric="9"/>
      <column name="T_CODEKIND" valueComputed="(select T_CODEKIND from DOBJKCODE_DBT where T_OBJECTTYPE = 9 and T_SHORTNAME = '1DAY' )"/>
      <column name="T_OBJECTID" valueNumeric="3808"/>
      <column name="T_CODE" value="SBERF"/>
      <column name="T_STATE" valueNumeric="0"/>
      <column name="T_USERID" valueNumeric="1"/>
      <column name="T_AUTOKEY" valueNumeric="0"/>
      <column name="T_BANKCLOSEDATE" valueComputed="to_date('01.01.0001', 'dd.mm.yyyy')"/>
      <column name="T_NORMCODE" valueComputed="CHR(0)"/>
    </insert>
  </changeSet>

  <changeSet id="115_DEF-84380_update_fininstr" author="Shvetsov">
    <update tableName="dfininstr_dbt">
      <column name="T_FACEVALUEFI" value="314"/>
      <where>T_NAME = 'GAZPF'</where>
    </update>

    <update tableName="dfininstr_dbt">
      <column name="T_FACEVALUEFI" value="3808"/>
      <where>T_NAME = 'SBERF'</where>
    </update>
  </changeSet>

</databaseChangeLog>