<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">
   <property name="now" value="sysdate" dbms="oracle"/>
   <changeSet id="112_DEF-79638_create_table.xml" author="Geraskina" >

      <createTable tableName="RUDATA_SECURITIES" remarks="Временная таблица для загрузки ценных бумаг из RUDATA. Столбцы с префиксом T_ - аналог столбцов таблиц СОФР, без префикса - аналог столбцов таблиц RUDATA">
         <column name="T_FACEVALUEFI"  type="NUMBER(10)"/>
         <column name="T_CCY"  type="VARCHAR2(255 CHAR)"/>
         <column name="T_ISSUER"  type="NUMBER(10)"/>
         <column name="T_AVOIRKIND"  type="NUMBER(10)"/>
         <column name="T_FI_CODE"  type="NUMBER(19)"/>
         <column name="T_FI_KIND"  type="NUMBER(10)"/>
         <column name="T_NAME"  type="VARCHAR2(255 CHAR)"/>
         <column name="T_DEFINITION"  type="VARCHAR2(255 CHAR)"/>
         <column name="T_SETTLEMENT_CODE"  type="NUMBER(10)"/>
         <column name="T_FACEVALUE"  type="NUMBER(10)"/>
         <column name="T_DRAWINGDATE"  type="DATE"/>
         <column name="ISINCODE"  type="VARCHAR2(255 CHAR)"/>
         <column name="REGCODE"  type="VARCHAR2(255 CHAR)"/>
         <column name="T_QTY"  type="NUMBER(32)"/>
         <column name="T_NKDROUND_KIND"  type="NUMBER(10)"/>
         <column name="T_INCOMETYPE"  type="NUMBER(10)"/>
         <column name="T_NKDBASE_KIND"  type="NUMBER(10)"/>
         <column name="T_INCIRCULATIONDATE"  type="DATE"/>
         <column name="T_TYPE"  type="NUMBER(10)"/>
         <column name="ISSUERINN"  type="VARCHAR2(255 CHAR)"/>
         <column name="ISSUERUID"  type="NUMBER(19)"/>
         <column name="T_ISSUED"  type="DATE"/>
         <column name="T_ENDPLACEMENTDATE"  type="DATE"/>
         <column name="T_FIID"  type="NUMBER(10)"/>
         <column name="FINTOOLID"  type="NUMBER(19)"/>
         <column name="T_LSIN"  type="VARCHAR2(35 BYTE)"/>
         <column name="T_ISSUERID"  type="NUMBER(10)"/>
         <column name="NOTRESIDENT"  type="NUMBER(10)"/>
         <column name="CFI"  type="VARCHAR2(255 CHAR)"/>
         <column name="T_ATTR_CODE"  type="VARCHAR2(255 CHAR)"/>
         <column name="OGRN"  type="VARCHAR2(100 CHAR)"/>
         <column name="T_ISDRAWING"  type="NUMBER(10)"/>
         <column name="NRDCODE"  type="VARCHAR2(255 CHAR)"/>
         <column name="TIN"  type="VARCHAR2(100 CHAR)"/>
         <column name="ISSUER_NRD"  type="VARCHAR2(100 CHAR)"/>
         <column name="SWIFT"  type="VARCHAR2(100 CHAR)"/>
         <column name="LEI_CODE"  type="VARCHAR2(255 CHAR)"/>
         <column name="T_BEGPLACEMENTDATE"  type="DATE"/>
         <column name="FINTOOLTYPE"  type="VARCHAR2(255 CHAR)"/>
         <column name="SECURITYTYPE"  type="VARCHAR2(255 CHAR)"/>
         <column name="ISSUER_INTERFAX"  type="VARCHAR2(19 BYTE)"/>
         <column name="COUPONTYPE"  type="VARCHAR2(1 BYTE)"/>
         <column name="COUPON_TYPE"  type="VARCHAR2(255 CHAR)"/>
         <column name="STATE_REG_NUMBER"  type="VARCHAR2(255 CHAR)"/>
         <column name="IS_SUBORDINATED"  type="NUMBER(1)"/>
         <column name="BASE_DR_FI"  type="VARCHAR2(255 CHAR)"/>
         <column name="INDEXNOM"  type="NUMBER(10)"/>
         <column name="HAVEDEFAULT"  type="NUMBER(10)"/>
         <column name="KPP"  type="VARCHAR2(100 CHAR)"/>
         <column name="SECURITYKIND"  type="VARCHAR2(255 CHAR)"/>
         <column name="DRQTY"  type="NUMBER(25)"/>
         <column name="SHQTY"  type="NUMBER(25)"/>
         <column name="SESSION_GUID"  type="VARCHAR2(50 BYTE)"/>
         <column name="NUMBER_PACK"  type="NUMBER(10)"/>
         <column name="STATUS"  type="CHAR(1)" remarks="NULL - не обрабатывалось, X - успех, E - ошибка"/>
      </createTable>

      <createIndex indexName="RUDATA_SECURITIES_IDX1" tableName="RUDATA_SECURITIES" tablespace="INDX">
         <column name="SESSION_GUID"/>
         <column name="NUMBER_PACK"/>
      </createIndex>
      
   </changeSet>

</databaseChangeLog>
