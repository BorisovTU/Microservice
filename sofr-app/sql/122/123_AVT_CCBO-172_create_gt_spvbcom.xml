<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">

  <changeSet id="123_AVT_CCBO-172_create_gt_spvbcom" author="Ponomareva">
    <preConditions onFail="MARK_RAN">
        <not>
            <tableExists tableName="dgt_spvbcomiss_dbt"/>
        </not>
    </preConditions>
    <createTable tableName="dgt_spvbcomiss_dbt" remarks="Промежуточная таблица посделочных комиссий">
      <column name="t_tr_date" type="DATE" remarks="Дата взимания комиссии"/>
      <column name="t_tr_id" type="VARCHAR(30)" remarks="СПВБ-код сделки"/>
      <column name="t_tr_exhcomm" type="NUMBER(32,12)" remarks="Биржевая комиссия сделки"/>
      <column name="t_tr_clrcomm" type="NUMBER(32,12)" remarks="Клиринговая комиссия сделки"/>
    </createTable>

    <createIndex indexName="dgt_spvbcomiss_dbt_idx0" tableName="dgt_spvbcomiss_dbt" unique="false" tablespace="INDX">
      <column name="t_tr_date"/>
    </createIndex>

    <createIndex indexName="dgt_spvbcomiss_dbt_idx1" tableName="dgt_spvbcomiss_dbt" unique="false" tablespace="INDX">
      <column name="t_tr_id"/>
    </createIndex>

    <createIndex indexName="dgt_spvbcomiss_dbt_idx2" tableName="dgt_spvbcomiss_dbt" unique="true" tablespace="INDX">
      <column name="t_tr_date"/>
      <column name="t_tr_id"/>
    </createIndex>

  </changeSet>

</databaseChangeLog>