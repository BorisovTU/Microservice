<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">

  <changeSet id="123_AVT_CCBO-172_gate_upd_1" author="Ponomareva">
    <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
            select count(1) from dgtfunc_dbt where t_macro = 'gtImSРVC.mac'
            </sqlCheck>
    </preConditions>
    <insert tableName="dgtfunc_dbt">
      <column name="t_funcid" valueNumeric="0"/>
      <column name="t_macro" value="gtImSРVC.mac"/>
      <column name="t_param" valueComputed="chr(1)"/>
      <column name="t_isautostart" valueComputed="chr(0)"/>
      <column name="t_sheduleid" valueNumeric="0"/>
      <column name="t_startdate" valueComputed="to_date('01.01.0001', 'dd.mm.yyyy')"/>
      <column name="t_starttime" valueComputed="to_date('01.01.0001 00:00:00', 'dd.mm.yyyy hh24:mi:ss')"/>
      <column name="t_periodkind" valueNumeric="1"/>
      <column name="t_period" valueNumeric="0"/>
    </insert>
  </changeSet>
  
  <changeSet id="120_DEF-123_AVT_CCBO-172_gate_upd_2" author="Ponomareva">
    <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
            select count(1) from dgtapp_dbt where t_code = 'SRC-41'
            </sqlCheck>
    </preConditions>
    <insert tableName="dgtapp_dbt">
      <column name="t_applicationid" valueNumeric="0"/>
      <column name="t_code" value="SRC-41"/>
      <column name="t_name" value="СПВБ, комиссии"/>
      <column name="t_issource" valueComputed="chr(88)"/>
      <column name="t_3dsysid" valueComputed="(select t_3dsysid from dgt3dsys_dbt where t_name = 'СПВБ')"/>
      <column name="t_funcid" valueComputed="(select t_funcid from dgtfunc_dbt where t_macro = 'gtImSРVC.mac')"/>
      <column name="t_isblocked" valueComputed="chr(0)"/>
    </insert>
  </changeSet>

</databaseChangeLog>