<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">

  <changeSet id="123_AVT_CCBO-172_upd_sfcontr_1" author="Ponomareva">
    <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
            select count(1) from dsfcontr_dbt where t_number = '0000_СПВБ'
            </sqlCheck>
    </preConditions>
    <insert tableName="dsfcontr_dbt">
      <column name="t_id" valueNumeric="0"/>
      <column name="t_objecttype" valueNumeric="0"/>
      <column name="t_fiid" valueNumeric="-1"/>
      <column name="t_object" value="chr(1)"/>
      <column name="t_partyid" valueNumeric="1"/>
      <column name="t_number" value="0000_СПВБ"/>
      <column name="t_datebegin" valueComputed="to_date('01.01.2025', 'dd.mm.yyyy')"/>
      <column name="t_dateprolong" valueComputed="to_date('01.01.0001', 'dd.mm.yyyy')"/>
      <column name="t_dateclose" valueComputed="to_date('01.01.0001', 'dd.mm.yyyy')"/>
      <column name="t_paymethod" valueNumeric="1"/>
      <column name="t_name" value="Договор для СПВБ"/>
      <column name="t_dateconc" valueComputed="to_date('01.01.2025', 'dd.mm.yyyy')"/>
      <column name="t_contractorid" valueNumeric="365275"/>
      <column name="t_servkind" valueNumeric="21"/>
      <column name="t_servkindsub" valueNumeric="0"/>
      <column name="t_setaccsearchalg" valueNumeric="1"/>
      <column name="t_invmethod" valueNumeric="1"/>
      <column name="t_payfiid" valueNumeric="0"/>
      <column name="t_payrateid" valueNumeric="7"/>
      <column name="t_payratepercent" valueNumeric="0"/>
      <column name="t_payratedatekind" valueNumeric="2"/>
      <column name="t_invoiceduration" valueNumeric="70"/>
      <column name="t_department" valueNumeric="1"/>
      <column name="t_acccode" value="0000"/>
      <column name="t_branch" valueNumeric="0"/>
      <column name="t_unioncontrid" valueNumeric="0"/>
      <column name="t_preacptid" valueNumeric="0"/>
    </insert>
  </changeSet>
  
  <changeSet id="123_AVT_CCBP-172_upd_sfcontr_2" author="Ponomareva">
    <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
            select count(1) from dsfconcom_dbt concom where concom.t_objectid in (select sfc.t_id from dsfcontr_dbt sfc where sfc.t_number = '0000_СПВБ')
            </sqlCheck>
    </preConditions>
    <insert tableName="DSFCONCOM_DBT">
      <column name="t_objectid" valueNumeric="(select sfc.t_id from dsfcontr_dbt sfc where sfc.t_number = '0000_СПВБ')"/>
      <column name="t_feetype" valueNumeric="1"/>
      <column name="t_commnumber" valueNumeric="(select comiss.t_number from dsfcomiss_dbt comiss where comiss.t_code = 'СПВББиржВ')"/>
      <column name="t_status" valueNumeric="0"/>
      <column name="t_calcperiodtype" valueNumeric="1"/>
      <column name="t_calcperiodnum" valueNumeric="1"/>
      <column name="t_date" valueComputed="to_date('01.01.0001', 'dd.mm.yyyy')"/>
      <column name="t_getsummin" valueComputed="chr(0)"/>
      <column name="t_summin" valueNumeric="0"/>
      <column name="t_summax" valueNumeric="0"/>
      <column name="t_datebegin" valueComputed="to_date('01.01.2025', 'dd.mm.yyyy')"/>
      <column name="t_dateend" valueComputed="to_date('01.01.0001', 'dd.mm.yyyy')"/>
      <column name="t_objecttype" valueNumeric="659"/>
      <column name="t_id" valueNumeric="0"/>
      <column name="t_sfplanid" valueNumeric="0"/>
      <column name="t_isfreeperiod" valueComputed="chr(0)"/>
      <column name="t_isindividual" valueComputed="chr(0)"/>
      <column name="t_isbankexpenses" valueComputed="chr(0)"/>
      <column name="t_iscompensationcom" valueComputed="chr(0)"/>
    </insert>

    <insert tableName="DSFCONCOM_DBT">
      <column name="t_objectid" valueNumeric="(select sfc.t_id from dsfcontr_dbt sfc where sfc.t_number = '0000_СПВБ')"/>
      <column name="t_feetype" valueNumeric="1"/>
      <column name="t_commnumber" valueNumeric="(select comiss.t_number from dsfcomiss_dbt comiss where comiss.t_code = 'СПВББиржКлирВ')"/>
      <column name="t_status" valueNumeric="0"/>
      <column name="t_calcperiodtype" valueNumeric="1"/>
      <column name="t_calcperiodnum" valueNumeric="1"/>
      <column name="t_date" valueComputed="to_date('01.01.0001', 'dd.mm.yyyy')"/>
      <column name="t_getsummin" valueComputed="chr(0)"/>
      <column name="t_summin" valueNumeric="0"/>
      <column name="t_summax" valueNumeric="0"/>
      <column name="t_datebegin" valueComputed="to_date('01.01.2025', 'dd.mm.yyyy')"/>
      <column name="t_dateend" valueComputed="to_date('01.01.0001', 'dd.mm.yyyy')"/>
      <column name="t_objecttype" valueNumeric="659"/>
      <column name="t_id" valueNumeric="0"/>
      <column name="t_sfplanid" valueNumeric="0"/>
      <column name="t_isfreeperiod" valueComputed="chr(0)"/>
      <column name="t_isindividual" valueComputed="chr(0)"/>
      <column name="t_isbankexpenses" valueComputed="chr(0)"/>
      <column name="t_iscompensationcom" valueComputed="chr(0)"/>
    </insert>
  </changeSet>

</databaseChangeLog>