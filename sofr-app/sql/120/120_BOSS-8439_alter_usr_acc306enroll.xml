<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">
  <changeSet id="120_BOSS-8439_alter_usr_acc306enroll" author="ToporkovDV">

    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_JMSMESSAGEID"
                      remarks="ID входящего сообщения"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_CONTRNUMBER"
                      remarks="Номер договора, переданный из АБС"/>                      
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_DOCNUMBER"
                      remarks="Номер документа(паспорт)"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_DOCISSUED"
                      remarks="Дата выдачи документа"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_DATE"
                      remarks="Дата зачисления, переданная из АБС"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_TIME"
                      remarks="Время создания записи"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_DEBETACCOUNT"
                      remarks="Счет дебет, переданный из АБС"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_CREDITACCOUNT"
                      remarks="Счет кредит, транзитный сводный счет 306Т"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_SUM"
                      remarks="Сумма зачисления"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_CURRCODE"
                      remarks="Валюта, ISO-код"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_ACCTSEND"
                      remarks="Счет клиента 408*, с которого выполняется пополнение"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_BIC"
                      remarks="БИК банка, в котором открыт счет T_ACCTSEND"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_GROUND"
                      remarks="Назначение платежа"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_STATE"
                      remarks="Статус 0 – создана 1 – выполнена проводка на 306Т 2 – создана операция зачисления 3 – выполнена проводка возврата"/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_NPTXOPID"
                      remarks="ID созданной операции зачисления. Заполнена только по записи со статусом 3."/>
    <setColumnRemarks tableName="USR_ACC306ENROLL_DBT"
                      columnName="T_ISINDIVIDENT"
                      remarks="Признак ИП"/>
    <modifyDataType tableName="USR_ACC306ENROLL_DBT" 
                    columnName="T_DOCTYPE" newDataType="VARCHAR2(24)"/>
    <addColumn tableName="USR_ACC306ENROLL_DBT">
      <column name="t_PayerKPP" type="VARCHAR2(24)" defaultValueNumeric="CHR(1)" remarks="КПП плательщика"/>
      <column name="t_LegalForm" type="NUMBER(5)" defaultValueNumeric="-1" remarks="Признак типа клиента 1-ЮЛ 2-ФЛ 3-ИП"/>
    </addColumn>
    <renameColumn tableName="USR_ACC306ENROLL_DBT" 
                  newColumnName="t_PayerName"
                  oldColumnName="t_ClientName" />
    <renameColumn tableName="USR_ACC306ENROLL_DBT" 
                  newColumnName="t_PayeeName"
                  oldColumnName="t_PayeeFio" />
    <renameColumn tableName="USR_ACC306ENROLL_DBT" 
                  newColumnName="t_PayerINN"
                  oldColumnName="t_INN"
                  columnDataType="VARCHAR2(24)" />
    <dropColumn tableName="USR_ACC306ENROLL_DBT" 
                columnName="T_ISINDIVIDENT" />


    <update tableName="USR_ACC306ENROLL_DBT">
      <column name="t_LegalForm" value="2" />
    </update>
    
  </changeSet>
</databaseChangeLog>
