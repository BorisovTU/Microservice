<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">
  <changeSet id="DEF-82598_update_regval_2" author="SennikovIV">
    <update tableName="dregval_dbt">
        <column name="T_FMTBLOBDATA_XXXX" valueComputed="(to_blob(utl_raw.cast_to_raw('..\TxtFile'||chr(0))))" />
        <where> t_keyid = (select t_keyid from dregparm_dbt where t_parentid = (SELECT t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path  from dregparm_dbt p connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0) where Path='/РСХБ/БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ/ОТЧЕТ БРОКЕРА') and t_name = 'GENERATED_REPORTS' )  </where>
    </update>

    <update tableName="dregval_dbt">
        <column name="T_FMTBLOBDATA_XXXX" valueComputed="(to_blob(utl_raw.cast_to_raw('\\sgo-fc01-r03.go.rshbank.ru\sofr_for_etl\inbox\BROKERREP'||chr(0))))" />
        <where> t_keyid = (select t_keyid from dregparm_dbt where t_parentid = (SELECT t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path  from dregparm_dbt p connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0) where Path='/РСХБ/БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ/ОТЧЕТ БРОКЕРА') and t_name = 'BROKERREP' )  </where>
    </update>

    <update tableName="dregval_dbt">
        <column name="T_FMTBLOBDATA_XXXX" valueComputed="(to_blob(utl_raw.cast_to_raw('.\TxtFile'||chr(0))))" />
        <where> t_keyid = (select t_keyid from dregparm_dbt where t_parentid = (SELECT t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path  from dregparm_dbt p connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0) where Path='/РСХБ/БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ/ОТЧЕТ БРОКЕРА') and t_name = 'TERM_BROKERREP' )  </where>
    </update>

    <update tableName="dregval_dbt">
        <column name="T_FMTBLOBDATA_XXXX" valueComputed="(to_blob(utl_raw.cast_to_raw('BROKERREPARCH'||chr(0))))" />
        <where> t_keyid = (select t_keyid from dregparm_dbt where t_parentid = (SELECT t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path  from dregparm_dbt p connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0) where Path='/РСХБ/БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ/ОТЧЕТ БРОКЕРА/PATHS') and t_name = 'BROKERREPARCH' )  </where>
    </update>

    <update tableName="dregval_dbt">
        <column name="T_FMTBLOBDATA_XXXX" valueComputed="(to_blob(utl_raw.cast_to_raw('SENT_REPORTS'||chr(0))))" />
        <where> t_keyid = (select t_keyid from dregparm_dbt where t_parentid = (SELECT t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path  from dregparm_dbt p connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0) where Path='/РСХБ/БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ/ОТЧЕТ БРОКЕРА/PATHS') and t_name = 'SENT_REPORTS' )  </where>
    </update>

    <update tableName="dregval_dbt">
        <column name="T_FMTBLOBDATA_XXXX" valueComputed="(to_blob(utl_raw.cast_to_raw('SIGNED_REPORTS'||chr(0))))" />
        <where> t_keyid = (select t_keyid from dregparm_dbt where t_parentid = (SELECT t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path  from dregparm_dbt p connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0) where Path='/РСХБ/БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ/ОТЧЕТ БРОКЕРА/PATHS') and t_name = 'SIGNED_REPORTS' )  </where>
    </update>

    <update tableName="dregval_dbt">
        <column name="T_FMTBLOBDATA_XXXX" valueComputed="(to_blob(utl_raw.cast_to_raw('BRERROR'||chr(0))))" />
        <where> t_keyid = (select t_keyid from dregparm_dbt where t_parentid = (SELECT t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path  from dregparm_dbt p connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0) where Path='/РСХБ/БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ/ОТЧЕТ БРОКЕРА/PATHS') and t_name = 'BRERROR' )  </where>
    </update>

  </changeSet>
</databaseChangeLog>