<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">

  <!-- Актуализация справочника 5070 и классификатора 2020, цели списания -->
  <changeSet id="116_BOSS-7143_insert_llclass1.xml" author="VeligzhaninAV">

    <!-- Удаление первоначально заведенных данных в dllvalues_dbt по списку 5070 -->
    <delete tableName="dllvalues_dbt">
      <where>T_LIST=5070</where>
    </delete>

    <!-- Удаление первоначально заведенных данных в dllclsval_dbt по классификатору 2020 -->
    <delete tableName="dllclsval_dbt">
      <where>T_CLASSIFICATOR=2020</where>
    </delete>
                                                   
    <!-- 1) Вывод средств по брокерскому договору -->
    <insert tableName="dllclsval_dbt">
        <column name="T_CLASSIFICATOR" valueNumeric="2020" />							
        <column name="T_ELEMENT" valueNumeric="1" />							
        <column name="T_LIST" valueNumeric="5070" />                   
        <column name="T_ISSYS" value="X" />      						
        <column name="T_SORT" value="1" />
    </insert>
    <insert tableName="dllvalues_dbt">
        <column name="T_LIST" valueNumeric="5070" />                   
        <column name="T_ELEMENT" valueNumeric="1" />							
        <column name="T_CODE" value="ВыводПоБрДог" />  <!-- maxLen=16 -->    						
        <column name="T_NAME" value="Вывод средств по брокерскому договору" />
        <column name="T_FLAG" valueNumeric="0" />      						
        <column name="T_NOTE" valueComputed="CHR(1)" />
        <column name="T_RESERVE" valueComputed="CHR(1)" />
    </insert>

    <!-- 2) Вывод средств по доверенности\по решению суда -->
    <insert tableName="dllclsval_dbt">
        <column name="T_CLASSIFICATOR" valueNumeric="2020" />							
        <column name="T_ELEMENT" valueNumeric="2" />							
        <column name="T_LIST" valueNumeric="5070" />                   
        <column name="T_ISSYS" value="X" />      						
        <column name="T_SORT" value="1" />
    </insert>
    <insert tableName="dllvalues_dbt">
        <column name="T_LIST" valueNumeric="5070" />                   
        <column name="T_ELEMENT" valueNumeric="2" />							
        <column name="T_CODE" value="ВыводСуд" />  <!-- maxLen=16 -->    						
        <column name="T_NAME" value="Вывод средств по доверенности\по решению суда" />
        <column name="T_FLAG" valueNumeric="0" />      						
        <column name="T_NOTE" valueComputed="CHR(1)" />
        <column name="T_RESERVE" valueComputed="CHR(1)" />
    </insert>

    <!-- 3) Вывод средств наследнику -->
    <insert tableName="dllclsval_dbt">
        <column name="T_CLASSIFICATOR" valueNumeric="2020" />							
        <column name="T_ELEMENT" valueNumeric="3" />							
        <column name="T_LIST" valueNumeric="5070" />                   
        <column name="T_ISSYS" value="X" />      						
        <column name="T_SORT" value="1" />
    </insert>
    <insert tableName="dllvalues_dbt">
        <column name="T_LIST" valueNumeric="5070" />                   
        <column name="T_ELEMENT" valueNumeric="3" />							
        <column name="T_CODE" value="ВыводНаслед" />  <!-- maxLen=16 -->    						
        <column name="T_NAME" value="Вывод средств наследнику" />
        <column name="T_FLAG" valueNumeric="0" />      						
        <column name="T_NOTE" valueComputed="CHR(1)" />
        <column name="T_RESERVE" valueComputed="CHR(1)" />
    </insert>

    <!-- 4) Оплата дорогостоящего лечения с ИИС-3 -->
    <insert tableName="dllclsval_dbt">
        <column name="T_CLASSIFICATOR" valueNumeric="2020" />							
        <column name="T_ELEMENT" valueNumeric="4" />							
        <column name="T_LIST" valueNumeric="5070" />                   
        <column name="T_ISSYS" value="X" />      						
        <column name="T_SORT" value="1" />
    </insert>
    <insert tableName="dllvalues_dbt">
        <column name="T_LIST" valueNumeric="5070" />                   
        <column name="T_ELEMENT" valueNumeric="4" />							
        <column name="T_CODE" value="ВыводДорЛеч" />  <!-- maxLen=16 -->    						
        <column name="T_NAME" value="Оплата дорогостоящего лечения с ИИС-3" />
        <column name="T_FLAG" valueNumeric="0" />      						
        <column name="T_NOTE" valueComputed="CHR(1)" />
        <column name="T_RESERVE" valueComputed="CHR(1)" />
    </insert>

    <!-- 5) Перевод средств другому брокеру -->
    <insert tableName="dllclsval_dbt">
        <column name="T_CLASSIFICATOR" valueNumeric="2020" />							
        <column name="T_ELEMENT" valueNumeric="5" />							
        <column name="T_LIST" valueNumeric="5070" />                   
        <column name="T_ISSYS" value="X" />      						
        <column name="T_SORT" value="1" />
    </insert>
    <insert tableName="dllvalues_dbt">
        <column name="T_LIST" valueNumeric="5070" />                   
        <column name="T_ELEMENT" valueNumeric="5" />							
        <column name="T_CODE" value="ПереводДрБрок" />  <!-- maxLen=16 -->    						
        <column name="T_NAME" value="Перевод средств другому брокеру" />
        <column name="T_FLAG" valueNumeric="0" />      						
        <column name="T_NOTE" valueComputed="CHR(1)" />
        <column name="T_RESERVE" valueComputed="CHR(1)" />
    </insert>

    <!-- Обновление "Целей списания" для дорогостоящего лечения -->
    <update tableName="dnptxop_dbt">
        <column name="t_PayPurpose" valueNumeric="4" />
        <where>t_PayMedical='X'</where>
    </update>

  </changeSet>
</databaseChangeLog>