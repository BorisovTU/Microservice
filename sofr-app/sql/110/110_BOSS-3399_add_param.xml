<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">
  <changeSet id="110_BOSS-3399_add_param" author="Shestakov">
    <insert tableName="DREGPARM_DBT">
        <column name="T_KEYID" value="0" />
        <column name="T_PARENTID" valueComputed="(select t_KeyID from dregparm_dbt where t_Name = 'ИНТЕГРАЦИЯ КАФКА' and t_parentid = (select t_KeyID from dregparm_dbt where t_Name = 'БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ' and t_parentid = (select t_KeyID from dregparm_dbt  where t_Name = 'РСХБ' AND t_ParentID = 0)))"/>
        <column name="T_NAME" value="МЕТРИКИ СОФР" />
        <column name="T_TYPE" value="0" />
        <column name="T_GLOBAL" value="X" />
        <column name="T_DESCRIPTION" value="Сбор метрик" />
        <column name="T_SECURITY" value="" />
        <column name="T_ISBRANCH" value="" />
        <column name="T_TEMPLATE" value=" " />
    </insert>
	 <insert tableName="DREGVAL_DBT">
        <column name="T_KEYID" valueComputed="(select t_KeyID from dregparm_dbt where t_Name = 'МЕТРИКИ СОФР' and t_Type = 0 and t_parentid != 0)"/>
        <column name="T_REGKIND" value="0" />
        <column name="T_OBJECTID" value="0" />
        <column name="T_BLOCKUSERVALUE" value="" />
        <column name="T_EXPDEP" value="0" />
        <column name="T_LINTVALUE" value="1" />
        <column name="T_LDOUBLEVALUE" value="0" />
        <column name="T_FMTBLOBDATA_XXXX" value="" />
    </insert>
  </changeSet>
</databaseChangeLog>



<!--
INSERT INTO dregparm_dbt(T_KEYID, T_PARENTID, T_NAME, T_TYPE, T_GLOBAL, T_DESCRIPTION, T_SECURITY, T_ISBRANCH, T_TEMPLATE)
      select 0, 
      (select t_KeyID 
        from dregparm_dbt 
       where t_Name = 'ИНТЕГРАЦИЯ КАФКА'
         and t_parentid = (select t_KeyID 
                             from dregparm_dbt 
                            where t_Name = 'БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ'
                                and t_parentid = (select t_KeyID
                                                       from dregparm_dbt 
                                                      where t_Name = 'РСХБ' AND t_ParentID = 0))),
       'МЕТРИКИ СОФР', 0, 'X', 'Сбор метрик', chr(0), chr(0), chr(1)
      from dual;
      
    INSERT INTO dregval_dbt(T_KEYID, T_REGKIND, T_OBJECTID, T_BLOCKUSERVALUE, T_EXPDEP, T_LINTVALUE, T_LDOUBLEVALUE, T_FMTBLOBDATA_XXXX)
      select (select t_KeyID
                from dregparm_dbt 
               where t_Name = 'МЕТРИКИ СОФР'
                 and t_Type = 0
                 and t_parentid <> 0), 
       0, 0, chr(0), 0, 1, 0, ''
      from dual;
/
-->
	  