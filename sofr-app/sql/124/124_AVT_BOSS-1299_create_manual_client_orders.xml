<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:pro="http://www.liquibase.org/xml/ns/pro"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
                            http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">

    <changeSet id="124_AVT_BOSS-1299_create_manual_client_orders" author="Mustafaev">
        <createTable tableName="manual_client_orders" remarks="Введённые поручения трейдеров">

            <column name="id" type="number(10)" remarks="Идентификатор записи">
                <constraints primaryKey="true" nullable="false"/>
            </column>

            <column name="ordercode" type="varchar2(20)" remarks="Код поручения">
                <constraints nullable="true"/>
            </column>

            <column name="brokerref" type="varchar2(20)" remarks="Уникальный параметр - Референс">
                <constraints nullable="true"/>
            </column>

            <column name="trader_code" type="number(2)" remarks="Код трейдера">
                <constraints nullable="true"/>
            </column>

            <column name="techid" type="varchar(20)" remarks="Уникальный код">
                <constraints nullable="true"/>
            </column>

            <column name="state" type="number(2)" remarks="Состояние поручения:1-принято;2-отказано;3-исполнено;4-не найдена заявка">
                <constraints nullable="true"/>
            </column>

            <column name="date_order" type="date" remarks="Дата формирования поручения">
                <constraints nullable="true"/>
            </column>

            <column name="time_order" type="time" remarks="Время формирования поручения">
                <constraints nullable="true"/>
            </column>

            <column name="typeorder" type="number(10)" remarks="Тип поручения:1-электронный;2-бумажный;3-голосовой;4-иной">
                <constraints nullable="true"/>
            </column>

            <column name="partyid" type="number(10)" remarks="Идентификатор клиента СОФР">
                <constraints nullable="true"/>
            </column>

            <column name="ekk" type="varchar2(200)" remarks="Код ЕКК клиента">
                <constraints nullable="true"/>
            </column>

            <column name="sfcontrid" type="number(10)" remarks="Код договора клиента ">
                <constraints nullable="true"/>
            </column>

            <column name="typedeal" type="number(2)" remarks="Вид сделки:1-покупка;2-продажа">
                <constraints nullable="true"/>
            </column>

            <column name="qnty" type="number(32,12)" remarks="Количество бумаг">
                <constraints nullable="true"/>
            </column>

            <column name="price" type="number(32,12)" remarks="Цена бумаги">
                <constraints nullable="true"/>
            </column>

            <column name="note" type="varchar2(32)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="bookid" type="number(10)" remarks="Код книги">
                <constraints nullable="true"  foreignKeyName="fk_manual_client_orders_book"
                 references="trade_order_book(id)"/>
            </column>

            <column name="fiid" type="number(10)" remarks="Номер фин.инструмента">
                <constraints nullable="true"/>
            </column>

            <column name="fiid_kind_order" type="number(2)" remarks="Использование фин.инструмента или книги. 1-фин.инструмент; 2-книга">
                <constraints nullable="true"/>
            </column>

        </createTable>
    </changeSet>    

</databaseChangeLog>
