<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
                            http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">

    <changeSet id="BOSS-8062_create_table_otc_deals_buffer" author="Simanov">
        <createTable tableName="otc_deals_buffer" remarks="Буффер внебиржевых сделок, создаваемых в рамках замещения ЦБ">
            <column name="id" type="number(10)" remarks="PK">
                <constraints primaryKey="true" primaryKeyName="pk_otc_deals_buffer"/>
            </column>
            <column name="deal_id"       type="number(10)"     remarks="ИД созданной сделки ddl_tick_dbt.t_dealid"/>
            <column name="client_id"     type="number(10)"     remarks="ИД клиента dparty_dbt.t_partyid"/>
            <column name="contract_id"   type="number(10)"     remarks="ИД субдоговора клиента dsfcontr_dbt.t_id"/>
            <column name="instrument_id" type="number(10)"     remarks="ИД ценной бумаги dfininstr_dbt.t_fiid"/>
            <column name="amount"        type="number(32,12)"  remarks="Колчиество инструмента"/>
            <column name="price"         type="number(32,12)"  remarks="Цена за один инструмент"/>
            <column name="direction"     type="varchar2(10)"   remarks="Направление сделки (BUY, SELL)"/>
            <column name="error"         type="varchar2(4000)" remarks="текст ошибки"/>
            <column name="create_date"   type="date"           remarks="дата создания записи"/>
        </createTable>
    </changeSet>
</databaseChangeLog>