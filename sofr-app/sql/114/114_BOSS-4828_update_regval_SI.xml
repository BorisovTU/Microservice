<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">
  <changeSet id="114_BOSS-4828_update_regval_SI" author="Geraskina">
    <preConditions onFail="MARK_RAN">
      <not>
        <changeSetExecuted id="114_BOSS-4828_update_regval_SI" author="Geraskina" changeLogFile="111.6/114_BOSS-4828_update_regval_SI.xml" />
      </not>
    </preConditions>

    <update tableName="dregparm_dbt">
        <column name="t_Name" value="НЕТОРГОВЫЕ ОПЕРАЦИИ_СВОИ ИНВЕСТ"/>
        <where>t_ParentId = (select t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path
                                                    from dregparm_dbt p
                                                 connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)
                              where Path='/РСХБ/БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ/ИНТЕГРАЦИЯ КАФКА')
               and t_Name = 'НЕТОРГОВЫЕ ОПЕРАЦИИ_СИ'</where>
    </update>
    <update tableName="dregval_dbt">
        <column name="T_LINTVALUE" valueNumeric="0" />
        <where> T_KEYID= (select t_keyid from ( 
                             select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path                                     
                               from dregparm_dbt p 
                               connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)                                 
                           where Path='/РСХБ/БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ/ИНТЕГРАЦИЯ КАФКА/НЕТОРГОВЫЕ ОПЕРАЦИИ_СВОИ ИНВЕСТ') </where>
    </update>

    <update tableName="dregparm_dbt">
        <column name="t_Name" value="НЕТОРГОВЫЕ ОПЕРАЦИИ_ТОЛЬКО ФЛ"/>
        <where>t_ParentId = (select t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path
                                                    from dregparm_dbt p
                                                 connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)
                              where Path='/РСХБ/БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ/ИНТЕГРАЦИЯ КАФКА')
               and t_Name = 'НЕТОРГОВЫЕ_ОПЕРАЦИИ_ТОЛЬКО_ФЛ'</where>
    </update>
    <update tableName="dregval_dbt">
        <column name="T_LINTVALUE" valueNumeric="88" />
        <where> T_KEYID= (select t_keyid from (
                             select p.t_keyid, SYS_CONNECT_BY_PATH(p.t_name, '/') Path         
                               from dregparm_dbt p                            
                               connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)
                           where Path='/РСХБ/БРОКЕРСКОЕ ОБСЛУЖИВАНИЕ/ИНТЕГРАЦИЯ КАФКА/НЕТОРГОВЫЕ ОПЕРАЦИИ_ТОЛЬКО ФЛ') </where>
    </update>
    
  </changeSet>
</databaseChangeLog>