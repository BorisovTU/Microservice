<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">

  <changeSet id="123_AVT_CCBO-90_ins_mccateg_4_1" author="Ponomareva">
    <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
            select count(1) from dmccateg_dbt where t_number = 31 and t_param1 = 1110 and t_class1 = 154
            </sqlCheck>
    </preConditions>
    <update tableName="dmccateg_dbt">
      <column name="t_param1" valueNumeric="1110"/>
      <column name="t_class1" valueNumeric="154"/>
      <where> t_number = 31 </where>
    </update>

    <update tableName="dmctempl_dbt">
      <column name="t_value1" valueNumeric="6"/>
      <column name="t_mask" value="4460401"/>
      <where> t_number = 1 and  t_catid in (select cat.t_id from dmccateg_dbt cat where cat.t_number = 31 and cat.t_leveltype = 1) </where>
    </update>

    <insert tableName="dmctempl_dbt">
      <column name="t_catid" valueComputed="(select t_id from dmccateg_dbt where t_number = 31 and t_leveltype = 1)"/>
      <column name="t_number" valueNumeric="2"/>
      <column name="t_value1" valueNumeric="7"/>
      <column name="t_value2" valueNumeric="-1"/>
      <column name="t_value3" valueNumeric="-1"/>
      <column name="t_value4" valueNumeric="-1"/>
      <column name="t_value5" valueNumeric="-1"/>
      <column name="t_value6" valueNumeric="-1"/>
      <column name="t_value7" valueNumeric="-1"/>
      <column name="t_value8" valueNumeric="-1"/>
      <column name="t_chapter" valueNumeric="1"/>
      <column name="t_balance" value="70606"/>
      <column name="t_mask" value="4460402"/>
      <column name="t_kind_account" value="А"/>
      <column name="t_groupnum" valueNumeric="0"/>
      <column name="t_hasperiod" valueComputed="chr(0)"/>
      <column name="t_notauto" valueComputed="chr(88)"/>
      <column name="t_isclose" valueComputed="chr(0)"/>
      <column name="t_accountclient" valueNumeric="0"/>
      <column name="t_typeaccount" valueComputed="chr(0)"/>
      <column name="t_reserve" valueComputed="chr(0)"/>
    </insert>

  </changeSet>

  <changeSet id="123_AVT_CCBO-90_ins_mccateg_4_2" author="Ponomareva">
    <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
            select count(1) from dmccateg_dbt where t_number = 32 and t_param2 = 2820 and t_class2 = 1621
            </sqlCheck>
    </preConditions>
    <update tableName="dmccateg_dbt">
      <column name="t_param2" valueNumeric="2820"/>
      <column name="t_class2" valueNumeric="1621"/>
      <where> t_number = 32 </where>
    </update>

    <update tableName="dmctempl_dbt">
      <column name="t_value2" valueNumeric="31"/>
      <column name="t_mask" value="2460401"/>
      <where> t_number = 1 and  t_catid in (select cat.t_id from dmccateg_dbt cat where cat.t_number = 32 and cat.t_leveltype = 1) </where>
    </update>

    <insert tableName="dmctempl_dbt">
      <column name="t_catid" valueComputed="(select t_id from dmccateg_dbt where t_number = 32 and t_leveltype = 1)"/>
      <column name="t_number" valueNumeric="3"/>
      <column name="t_value1" valueNumeric="1"/>
      <column name="t_value2" valueNumeric="32"/>
      <column name="t_value3" valueNumeric="-1"/>
      <column name="t_value4" valueNumeric="-1"/>
      <column name="t_value5" valueNumeric="-1"/>
      <column name="t_value6" valueNumeric="-1"/>
      <column name="t_value7" valueNumeric="-1"/>
      <column name="t_value8" valueNumeric="-1"/>
      <column name="t_chapter" valueNumeric="1"/>
      <column name="t_balance" value="70601"/>
      <column name="t_mask" value="2460403"/>
      <column name="t_kind_account" value="П"/>
      <column name="t_groupnum" valueNumeric="0"/>
      <column name="t_hasperiod" valueComputed="chr(0)"/>
      <column name="t_notauto" valueComputed="chr(88)"/>
      <column name="t_isclose" valueComputed="chr(0)"/>
      <column name="t_accountclient" valueNumeric="0"/>
      <column name="t_typeaccount" valueComputed="chr(0)"/>
      <column name="t_reserve" valueComputed="chr(0)"/>
    </insert>

  </changeSet>
</databaseChangeLog>