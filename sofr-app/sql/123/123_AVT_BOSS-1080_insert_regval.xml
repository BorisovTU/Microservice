<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">
  <changeSet id="123_AVT_BOSS-1080_insert_regval" author="Nikolaev">  
    
    <!-- COMMON\НДФЛ\ФОРМИРОВАНИЕ НОБ_УЧАСТ -->
    <insert tableName="dregparm_dbt">
      <column name="t_keyid" valueNumeric="0"/>
      <column name="t_parentid" valueComputed="(SELECT t_keyid
                                                  from (select p.t_keyid, SYS_CONNECT_BY_PATH(p.t_name, '/') Path
                                                          from dregparm_dbt p
                                                        connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)
                                                  where Path='/COMMON/НДФЛ')"/>
      <column name="t_name" value="ФОРМИРОВАНИЕ НОБ_УЧАСТ"/>
      <column name="t_type" valueNumeric="4"/>
      <column name="t_global" valueComputed="CHR(88)"/>
      <column name="t_description" value="Регулирует формирования НОБ_УЧАСТ в процессах расчета НОБ клиентов в отношении разных налоговых периодов"/>
      <column name="t_security" valueComputed="CHR(0)"/>
      <column name="t_isbranch" valueComputed="CHR(0)"/>
      <column name="t_template" valueComputed="CHR(1)"/>
    </insert>
  	
    <!-- Значение COMMON\НДФЛ\ФОРМИРОВАНИЕ НОБ_УЧАСТ -->
    <insert tableName="dregval_dbt">
      <column name="t_keyid" valueComputed="(SELECT t_keyid 
                                               FROM dregparm_dbt 
                                              WHERE t_parentid = (SELECT t_keyid                                               
                                                                    FROM (SELECT p.t_keyid, SYS_CONNECT_BY_PATH(p.t_name, '/') Path                                     
                                                                            FROM dregparm_dbt p                    
                                                                         connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)                                 
                                                                   WHERE Path='/COMMON/НДФЛ')
                                                AND t_name = 'ФОРМИРОВАНИЕ НОБ_УЧАСТ')"/>
      <column name="t_regkind" valueNumeric="0"/>
      <column name="t_objectid" valueNumeric="0"/>
      <column name="t_blockuservalue" valueComputed="CHR(0)"/>
      <column name="t_expdep" valueNumeric="0"/>
      <column name="t_lintvalue" valueNumeric="88"/>
      <column name="t_ldoublevalue" valueNumeric="0"/>
    </insert> 	

    <!-- COMMON\НДФЛ\ИИС в НОБ_УЧАСТ -->
    <insert tableName="dregparm_dbt">
      <column name="t_keyid" valueNumeric="0"/>
      <column name="t_parentid" valueComputed="(SELECT t_keyid
                                                  from (select p.t_keyid, SYS_CONNECT_BY_PATH(p.t_name, '/') Path
                                                          from dregparm_dbt p
                                                        connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)
                                                  where Path='/COMMON/НДФЛ')"/>
      <column name="t_name" value="ИИС в НОБ_УЧАСТ"/>
      <column name="t_type" valueNumeric="4"/>
      <column name="t_global" valueComputed="CHR(88)"/>
      <column name="t_description" value="Регулирует включение\исключение доходов от сделок в формировании НОБ_УЧАСТ в процессах расчет НОБ клиентов в отношении активов, учитываемых на ИИС"/>
      <column name="t_security" valueComputed="CHR(0)"/>
      <column name="t_isbranch" valueComputed="CHR(0)"/>
      <column name="t_template" valueComputed="CHR(1)"/>              
    </insert>

    <!-- Значение COMMON\НДФЛ\ИИС в НОБ_УЧАСТ -->
    <insert tableName="dregval_dbt">
      <column name="t_keyid" valueComputed="(SELECT t_keyid 
                                               FROM dregparm_dbt 
                                              WHERE t_parentid = (SELECT t_keyid                                               
                                                                    FROM (SELECT p.t_keyid, SYS_CONNECT_BY_PATH(p.t_name, '/') Path                                     
                                                                            FROM dregparm_dbt p                    
                                                                         connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)                                 
                                                                   WHERE Path='/COMMON/НДФЛ')
                                                AND t_name = 'ИИС в НОБ_УЧАСТ')"/>
      <column name="t_regkind" valueNumeric="0"/>
      <column name="t_objectid" valueNumeric="0"/>
      <column name="t_blockuservalue" valueComputed="CHR(0)"/>
      <column name="t_expdep" valueNumeric="0"/>
      <column name="t_lintvalue" valueNumeric="88"/>
      <column name="t_ldoublevalue" valueNumeric="0"/>
    </insert>

    <!-- COMMON\НДФЛ\ВАРИАТИВНЫЙ РАСЧЕТ НОБ -->
    <insert tableName="dregparm_dbt">
      <column name="t_keyid" valueNumeric="0"/>
      <column name="t_parentid" valueComputed="(SELECT t_keyid
                                                  from (select p.t_keyid, SYS_CONNECT_BY_PATH(p.t_name, '/') Path
                                                          from dregparm_dbt p
                                                        connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)
                                                  where Path='/COMMON/НДФЛ')"/>
      <column name="t_name" value="ВАРИАТИВНЫЙ РАСЧЕТ НОБ"/>
      <column name="t_type" valueNumeric="4"/>
      <column name="t_global" valueComputed="CHR(88)"/>
      <column name="t_description" value="Регулирует вариативность расчета НОБ"/>
      <column name="t_security" valueComputed="CHR(0)"/>
      <column name="t_isbranch" valueComputed="CHR(0)"/>
      <column name="t_template" valueComputed="CHR(1)"/>
    </insert>

    <!-- Значение COMMON\НДФЛ\ВАРИАТИВНЫЙ РАСЧЕТ НОБ -->
    <insert tableName="dregval_dbt">
      <column name="t_keyid" valueComputed="(SELECT t_keyid 
                                               FROM dregparm_dbt 
                                              WHERE t_parentid = (SELECT t_keyid                                               
                                                                    FROM (SELECT p.t_keyid, SYS_CONNECT_BY_PATH(p.t_name, '/') Path                                     
                                                                            FROM dregparm_dbt p                    
                                                                         connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)                                 
                                                                   WHERE Path='/COMMON/НДФЛ')
                                                AND t_name = 'ВАРИАТИВНЫЙ РАСЧЕТ НОБ')"/>
      <column name="t_regkind" valueNumeric="0"/>
      <column name="t_objectid" valueNumeric="0"/>
      <column name="t_blockuservalue" valueComputed="CHR(0)"/>
      <column name="t_expdep" valueNumeric="0"/>
      <column name="t_lintvalue" valueNumeric="88"/>
      <column name="t_ldoublevalue" valueNumeric="0"/>
    </insert>

    <!-- COMMON\НДФЛ\СУММА_МАКС_ВЫЧЕТА_УЧАСТ -->
    <insert tableName="dregparm_dbt">
      <column name="t_keyid" valueNumeric="0"/>
      <column name="t_parentid" valueComputed="(SELECT t_keyid
                                                  from (select p.t_keyid, SYS_CONNECT_BY_PATH(p.t_name, '/') Path
                                                          from dregparm_dbt p
                                                        connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)
                                                  where Path='/COMMON/НДФЛ')"/>
      <column name="t_name" value="СУММА_МАКС_ВЫЧЕТА_УЧАСТ"/>
      <column name="t_type" valueNumeric="0"/>
      <column name="t_global" valueComputed="CHR(88)"/>
      <column name="t_description" value="Регулирует предельное значение размера налогового вычета для НОБ_УЧАСТ"/>
      <column name="t_security" valueComputed="CHR(0)"/>
      <column name="t_isbranch" valueComputed="CHR(0)"/>
      <column name="t_template" valueComputed="CHR(1)"/>
    </insert>

    <!-- Значение COMMON\НДФЛ\СУММА_МАКС_ВЫЧЕТА_УЧАСТ -->
    <insert tableName="dregval_dbt">
      <column name="t_keyid" valueComputed="(SELECT t_keyid 
                                               FROM dregparm_dbt 
                                              WHERE t_parentid = (SELECT t_keyid                                               
                                                                    FROM (SELECT p.t_keyid, SYS_CONNECT_BY_PATH(p.t_name, '/') Path                                     
                                                                            FROM dregparm_dbt p                    
                                                                         connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)                                 
                                                                   WHERE Path='/COMMON/НДФЛ')
                                                AND t_name = 'СУММА_МАКС_ВЫЧЕТА_УЧАСТ')"/>
      <column name="t_regkind" valueNumeric="0"/>
      <column name="t_objectid" valueNumeric="0"/>
      <column name="t_blockuservalue" valueComputed="CHR(0)"/>
      <column name="t_expdep" valueNumeric="0"/>
      <column name="t_lintvalue" valueNumeric="50000000"/>
      <column name="t_ldoublevalue" valueNumeric="0"/>
    </insert>
 
  </changeSet>
</databaseChangeLog>