<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:pro="http://www.liquibase.org/xml/ns/pro"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd ">
  <changeSet id="119_BOSS-7879_insert_regval2.xml" author="Toporkov">
    <insert tableName="dregparm_dbt">
        <column name="t_keyId" valueNumeric="0" />
        <column name="t_ParentId" valueComputed="(SELECT t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path
                                                    from dregparm_dbt p, dregval_dbt v
                                                   where v.t_keyid=p.t_keyid and v.t_objectid=0
                                                 connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)
                                            where Path='/РСХБ/ИНТЕГРАЦИЯ/INTEGR_SERV_PRM')" />
        <column name="t_Name" value="IPS" />
        <column name="t_Type" valueNumeric="0" />
        <column name="t_Global" valueComputed="CHR(88)" />
        <column name="t_Description" value="Настройки по взаимодействию с сервисами IPS" />
        <column name="t_Security" valueComputed="CHR(0)" />
        <column name="t_IsBranch" valueComputed="CHR(0)" />
    </insert>
    <insert tableName="dregval_dbt">
        <column name="T_KEYID" valueComputed="(select t_keyid 
                                                 from dregparm_dbt 
                                                where t_parentid = (SELECT t_keyid                                               
                                                                      from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path                                     
                                                                              from dregparm_dbt p, dregval_dbt v 
                                                                             where v.t_keyid=p.t_keyid and v.t_objectid=0                       
                                                                           connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)                                 
                                                                     where Path='/РСХБ/ИНТЕГРАЦИЯ/INTEGR_SERV_PRM')
                                                                       and t_name = 'IPS' )" />
        <column name="T_REGKIND" valueNumeric="0" />
        <column name="T_OBJECTID" valueNumeric="0" />
        <column name="T_BLOCKUSERVALUE" valueComputed="CHR(0)" />
        <column name="T_EXPDEP" valueNumeric="0" />
        <column name="T_LINTVALUE" valueNumeric="0" />
        <column name="T_LDOUBLEVALUE" valueNumeric="0" />
        <column name="T_FMTBLOBDATA_XXXX" value="" />
    </insert>
    
    <!-- /РСХБ/ИНТЕГРАЦИЯ/INTEGR_SERV_PRM/IPS/MINIO ENDPOINT -->
    <insert tableName="dregparm_dbt">
        <column name="t_keyId" valueNumeric="0" />
        <column name="t_ParentId" valueComputed="(SELECT t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path
                                                    from dregparm_dbt p, dregval_dbt v
                                                   where v.t_keyid=p.t_keyid and v.t_objectid=0
                                                 connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)
                                            where Path='/РСХБ/ИНТЕГРАЦИЯ/INTEGR_SERV_PRM/IPS')" />
        <column name="t_Name" value="MINIO ENDPOINT" />
        <column name="t_Type" valueNumeric="2" />
        <column name="t_Global" valueComputed="CHR(88)" />
        <column name="t_Description" value="Адрес сервера IPS MINIO" />
        <column name="t_Security" valueComputed="CHR(0)" />
        <column name="t_IsBranch" valueComputed="CHR(0)" />
    </insert>
    <insert tableName="dregval_dbt">
        <column name="T_KEYID" valueComputed="(select t_keyid 
                                                 from dregparm_dbt 
                                                where t_parentid = (SELECT t_keyid                                               
                                                                      from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path                                     
                                                                              from dregparm_dbt p, dregval_dbt v 
                                                                             where v.t_keyid=p.t_keyid and v.t_objectid=0                       
                                                                           connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)                                 
                                                                     where Path='/РСХБ/ИНТЕГРАЦИЯ/INTEGR_SERV_PRM/IPS')
                                                                       and t_name = 'MINIO ENDPOINT' )" />
        <column name="T_REGKIND" valueNumeric="0" />
        <column name="T_OBJECTID" valueNumeric="0" />
        <column name="T_BLOCKUSERVALUE" valueComputed="CHR(0)" />
        <column name="T_EXPDEP" valueNumeric="0" />
        <column name="T_LINTVALUE" valueNumeric="0" />
        <column name="T_LDOUBLEVALUE" valueNumeric="0" />
        <column name="T_FMTBLOBDATA_XXXX" valueComputed="(to_blob(utl_raw.cast_to_raw('https://127.0.0.1:9000')))" />
    </insert>
    
    <!-- /РСХБ/ИНТЕГРАЦИЯ/INTEGR_SERV_PRM/IPS/MINIO ACCESS KEY -->
    <insert tableName="dregparm_dbt">
        <column name="t_keyId" valueNumeric="0" />
        <column name="t_ParentId" valueComputed="(SELECT t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path
                                                    from dregparm_dbt p, dregval_dbt v
                                                   where v.t_keyid=p.t_keyid and v.t_objectid=0
                                                 connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)
                                            where Path='/РСХБ/ИНТЕГРАЦИЯ/INTEGR_SERV_PRM/IPS')" />
        <column name="t_Name" value="MINIO ACCESS KEY" />
        <column name="t_Type" valueNumeric="2" />
        <column name="t_Global" valueComputed="CHR(88)" />
        <column name="t_Description" value="Идентификатор доступа к серверу IPS MINIO (пользователь)" />
        <column name="t_Security" valueComputed="CHR(0)" />
        <column name="t_IsBranch" valueComputed="CHR(0)" />
    </insert>
    <insert tableName="dregval_dbt">
        <column name="T_KEYID" valueComputed="(select t_keyid 
                                                 from dregparm_dbt 
                                                where t_parentid = (SELECT t_keyid                                               
                                                                      from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path                                     
                                                                              from dregparm_dbt p, dregval_dbt v 
                                                                             where v.t_keyid=p.t_keyid and v.t_objectid=0                       
                                                                           connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)                                 
                                                                     where Path='/РСХБ/ИНТЕГРАЦИЯ/INTEGR_SERV_PRM/IPS')
                                                                       and t_name = 'MINIO ACCESS KEY' )" />
        <column name="T_REGKIND" valueNumeric="0" />
        <column name="T_OBJECTID" valueNumeric="0" />
        <column name="T_BLOCKUSERVALUE" valueComputed="CHR(0)" />
        <column name="T_EXPDEP" valueNumeric="0" />
        <column name="T_LINTVALUE" valueNumeric="0" />
        <column name="T_LDOUBLEVALUE" valueNumeric="0" />
        <column name="T_FMTBLOBDATA_XXXX" valueComputed="(to_blob(utl_raw.cast_to_raw('UserID')))" />
    </insert>
    
    <!-- /РСХБ/ИНТЕГРАЦИЯ/INTEGR_SERV_PRM/IPS/MINIO SECRET KEY -->
    <insert tableName="dregparm_dbt">
        <column name="t_keyId" valueNumeric="0" />
        <column name="t_ParentId" valueComputed="(SELECT t_keyid from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path
                                                    from dregparm_dbt p, dregval_dbt v
                                                   where v.t_keyid=p.t_keyid and v.t_objectid=0
                                                 connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)
                                            where Path='/РСХБ/ИНТЕГРАЦИЯ/INTEGR_SERV_PRM/IPS')" />
        <column name="t_Name" value="MINIO SECRET KEY" />
        <column name="t_Type" valueNumeric="2" />
        <column name="t_Global" valueComputed="CHR(88)" />
        <column name="t_Description" value="Ключ доступа к серверу IPS MINIO (пароль)" />
        <column name="t_Security" valueComputed="CHR(0)" />
        <column name="t_IsBranch" valueComputed="CHR(0)" />
    </insert>
    <insert tableName="dregval_dbt">
        <column name="T_KEYID" valueComputed="(select t_keyid 
                                                 from dregparm_dbt 
                                                where t_parentid = (SELECT t_keyid                                               
                                                                      from (select p.t_keyid,SYS_CONNECT_BY_PATH(p.t_name, '/') Path                                     
                                                                              from dregparm_dbt p, dregval_dbt v 
                                                                             where v.t_keyid=p.t_keyid and v.t_objectid=0                       
                                                                           connect by prior p.t_keyid=p.t_parentid start with p.t_parentid=0)                                 
                                                                     where Path='/РСХБ/ИНТЕГРАЦИЯ/INTEGR_SERV_PRM/IPS')
                                                                       and t_name = 'MINIO SECRET KEY' )" />
        <column name="T_REGKIND" valueNumeric="0" />
        <column name="T_OBJECTID" valueNumeric="0" />
        <column name="T_BLOCKUSERVALUE" valueComputed="CHR(0)" />
        <column name="T_EXPDEP" valueNumeric="0" />
        <column name="T_LINTVALUE" valueNumeric="0" />
        <column name="T_LDOUBLEVALUE" valueNumeric="0" />
        <column name="T_FMTBLOBDATA_XXXX" valueComputed="(to_blob(utl_raw.cast_to_raw('Password')))" />
    </insert>
    
  </changeSet>
</databaseChangeLog>