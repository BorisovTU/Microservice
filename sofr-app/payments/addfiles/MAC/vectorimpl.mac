import rtutils;

//---------------------------------------------------------------------------
macro for_each( A, fn, parm )
  var i = 0;
  while( i < A.size )
    ExecMacro2(fn, A(i), parm);
    inc(i);
  end;
  return parm;
end;
//---------------------------------------------------------------------------
macro StandartCompare( l, r )
   if ( l<r )
     return -1;
   elif ( l>r )
     return 1;
   else
     return 0;
   end;
end;
//---------------------------------------------------------------------------
private macro partition(A, p, r, compare)
  var x = A(r);
  var i = p-1;
  var j = p;
  
  if ( compare == null )
     compare = "StandartCompare";
  end;
  
  while(j < r)
    if( ExecMacro2(compare, A(j), x) < 0 )
      i = i + 1;
      swap( A(i), A(j) );
    end;
    j = j + 1;
  end;
  
  swap( A(i+1), A(r) );
  return i+1;
end;
//---------------------------------------------------------------------------
macro quickSort(A, p, r, compare)
  var q = 0;
  if( p < r )
    q = partition(A, p, r, compare);
    quickSort(A, p, q-1, compare);
    quickSort(A, q+1, r, compare);
  end;
end;
//---------------------------------------------------------------------------

