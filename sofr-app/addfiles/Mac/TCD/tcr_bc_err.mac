//
//  Branch Cash: Обработка ошибок.
//

class BC_ErrCode

  private var code = TArray;
  private var msg  = TArray;

  macro ErrMsg( codeErr )
    var i = 1, n = code.Size;

    if ( codeErr == 0 )
      return "Успешное выполнение.";
    end;

    while ( i < n )
      if ( code[i] == codeErr )
        return String( code[i] ) + ": " + msg[i];
      else
        i = i + 1;
      end;
    end;

    return String( codeErr ) + ": Неизвестный код ошибки.";

  end;

  private macro InitBCErr()
    code[ 0] =    0;  msg[ 0] = "Успешное выполнение.";
    code[ 1] = 1001;  msg[ 1] = "Неверная команда.";
    code[ 2] = 1002;  msg[ 2] = "Команда не может быть выполнена в текущем режиме.";
    code[ 3] = 1003;  msg[ 3] = "Неизвестный идентификатор сейфа.";
    code[ 4] = 1004;  msg[ 4] = "Указанный слот не имеет смысла для данного устройства.";
    code[ 5] = 1005;  msg[ 5] = "Ошибка связи с устройством.";
    code[ 6] = 1006;  msg[ 6] = "Команду невозможно выполнить в режиме инкассации.";
    code[ 7] = 1007;  msg[ 7] = "Команду невозможно выполнить не в режиме инкассации.";
    code[ 8] = 1008;  msg[ 8] = "Устройство занято другим оператором.";
    code[ 9] = 1009;  msg[ 9] = "Устройство не было открыто.";
    code[10] = 1010;  msg[10] = "Устройство не сконфигурировано, работа невозможна.";
    code[11] = 1011;  msg[11] = "Замятие купюр.";
    code[12] = 1012;  msg[12] = "Ошибка железа.";
    code[13] = 1013;  msg[13] = "Во входном слоте находятся деньги.";
    code[14] = 1014;  msg[14] = "В выходном слоте устройства находятся деньги.";
    code[15] = 1015;  msg[15] = "Одна из кассет пуста.";
    code[16] = 1016;  msg[16] = "Одна из кассет переполнена.";
    code[17] = 1017;  msg[17] = "Указанную сумму невозможно выдать.";
    code[18] = 1018;  msg[18] = "Ошибка в данных выдачи.";
    code[19] = 1019;  msg[19] = "Неверная валюта для устройства.";
    code[20] = 1020;  msg[20] = "Неверные позиции кассет.";
    code[21] = 1021;  msg[21] = "Пользовательский таймаут при выдаче или приеме.";
    code[22] = 1022;  msg[22] = "Выданная сумма меньше заказанной.";
    code[23] = 2000;  msg[23] = "Database error.";
    code[24] = 2001;  msg[24] = "TellerAssist server not responding.";
  end;

  InitBCErr();

end;

/*
var ccc = -1;
var bce = BC_ErrCode;
   while ( ccc != 777 )
     GetInt( ccc, "Код" );
     msgbox(bce.ErrMsg( ccc ));
   end;
*/
