/*----------------------------------------------------------------------*/
/*         Автоматизированная банковская система RS-Bank                */
/*              Copyright (c) R-Style Software Lab                      */
/*                                                                      */
/*  Имя файла        : ps2ret2.mac                                      */
/*                                                                      */
/*  Описание         : Ожидание обработки в RS-Retail K2                */
/*                                                                      */
/*  Программист      : Гайворонский Е.Г.                                */
/*                                                                      */
/*  Создан           : 08.02.06                                         */
/*                                                                      */
/*----------------------------------------------------------------------*/

import PaymInter;

RECORD  Pm_paym( pmpaym );        /* ─┐                                                     */
RECORD  Pm_prop( pmprop );        /*  ├─ параметры платежа по клиентской платежке */
RECORD  Pm_rmprop( pmrmprop );    /* ─┘                                                     */

RECORD  PrimPmpaym( pmpaym );     /* ─┐                                                     */
RECORD  PrimPmprop( pmprop );     /*  ├─ параметры основного платежа по клиентской платежке */
RECORD  PrimPmrmprop( pmrmprop ); /* ─┘                                                     */

RECORD  PartPmpaym( pmpaym );     /* ─┐                                                               */
RECORD  PartPmprop( pmprop );     /*  ├─ параметры платежного документа частичной оплаты картотеки №2 */
RECORD  PartPmrmprop( pmrmprop ); /* ─┘                                                               */

RECORD  Ps_akkr( psakkr );        /* аккредитив */

MACRO ExecuteStep( doc, payorder ):integer

  if( PrimPmpaym.PaymentID ) // Частичная оплата
    if( PartPmpaym.PaymStatus != PM_FINISHED )
      MsgBox( "Обработка платежа в RS-Retail еще не завершена" );
      return 1;
    else
      return 0;
    end;
  end;  

  return 0;

END;