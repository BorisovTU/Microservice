/*----------------------------------------------------------------------*/
/*         Автоматизированная банковская система RS-Bank                */
/*              Copyright (c) R-Style Software Lab                      */
/*                                                                      */
/*  Имя файла        : psposend.mac                                     */
/*                                                                      */
/*  Описание         : Выполнение шага по выгрузке рублевых платежей    */
/*                     в Лоанс                                          */
/*                                                                      */
/*  Программист      : Смирнов С.В.                                     */
/*                                                                      */
/*  Создан           : 27.04.04                                         */
/*                                                                      */
/*----------------------------------------------------------------------*/

import PaymInter, "lnpaym.mac";

record pm_paym  ( "pmpaym.dbt"   ); /* параметры платежа по клиентской платежке */
record pm_prop  ( "pmprop.dbt"   ); /* буферы передаются в макрос из RS-Bank    */
record pm_rmprop( "pmrmprop.dbt" ); /* при вызове ExecuteStep                   */

MACRO ExecuteStep( ):integer

  var payment:RsbPayment = RsbPayment( pm_paym.PaymentID );
  var CreditAccount:string;

  // Определяем бэк-офис - получатель платежа
  payment.ToBackOffice = "Ц";

  // Статус платежа меняем на "Готов к квитовке"
  payment.PaymStatus   = PM_KVITWAIT;
  
  return 0;

END;
