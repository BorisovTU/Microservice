/************************************************************************/
/*         Автоматизированная банковская система RS-Bank                */
/*                 Copyright (c) R-Style Software Lab 1998              */
/*                                                                      */
/*  Имя файла        : pschcoll.mac                                     */
/*                                                                      */
/*  Описание         : Шаг - определение, является ли платеж внешним    */
/*                     (через картотеку №2)                             */
/*                                                                      */
/*  Программист      : Андреева Е.П.                                    */
/*                                                                      */
/*  Создан           : 27.11.2002                                       */
/*                                                                      */
/************************************************************************/
import BankInter,payconst, PaymInter;
import paym_rec; /* Pm_paym, Pm_rmprop, Pm_debet, Pm_credit */

RECORD  PartPmpaym( pmpaym );     /* ─┐                                                               */
RECORD  PartDebet ( pmprop );     /*  ├─ параметры платежного документа частичной оплаты картотеки №2 */
RECORD  PartCredit( pmprop );     /*  │                                                               */
RECORD  PartPmrmprop( pmrmprop ); /* ─┘                                                               */

RECORD  Ps_payord( pspayord );

/**********************************/
/* Выполнение шага                */
/**********************************/
MACRO ExecuteCaseStep(Kind_Operation, Number_Step, pspayord, KindDoc)

  setbuff(Ps_payord, pspayord);

    /* Проверка на внешний платеж */
    if( (PartCredit.PaymentID == PartPmpaym.PaymentID) and (PartCredit.Group == PAYMENTS_GROUP_EXTERNAL) )
         return string(НомерШагаКонтЧастОплатыВнешПлатК12);
    else
         return string(НомерШагаКонтЧастОплатыВнутрПлатК12);
    end;

END;


