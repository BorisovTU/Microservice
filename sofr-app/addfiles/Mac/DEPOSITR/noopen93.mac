import deprintr, alg_vars;

 ALG_RESULT = OK_RES;

 var clnt_l = TClientList; /* Справочник вкладчиков */

 // Проверка открытия нерезидентом для текущего счета.
 if ( ALG_DEPOSITOR.Type_Account == "Текущий счет" )
   if ( clnt_l.GetRecord( ALG_DEPOSITOR.CodClient ) )
     if ( clnt_l.CurRec.rec.NotResident )
       MsgBox( "Текущий счет нельзя открывать для нерезидента." );
       ALG_RESULT = END_RES;
     end;
   else
     MsgBox( "Не найдена запись вкладчика с CodClient = ",
             ALG_DEPOSITOR.CodClient );
     ALG_RESULT = ERR_RES;
   end;
 end;
/*
 if ( ( ALG_RESULT == OK_RES )  AND  ( {curdate} > date(11, 3, 2001) ) AND (StrFor(GetProgramID) != "П") )
   if ( NOT GetTrue( NULL,
                     "Данный вид вклада не имеет признака счета типа 'Ф'|" +
                     "Вы уверены в том что вы хотите открыть этот счет нерезиденту?" ) )
     ALG_RESULT = ERR_RES;
   end;
 end;
*/
end;
