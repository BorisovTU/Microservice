
/* ‘¬¥­  Ά¨¤  Ά« ¤  ¤«ο § η¨α«¥­¨ο ―¥­α¨¨ */
CONST
  …‘                                       =  2,
  …‘_                                    =  5,
  …‘_‚„                                   =  6,
  …‘_”‘                                   =  7,
  …‘_”‘                                  =  8,
  …‘_“€’“›                           =  9;

const
  UPDATE_DEPDOC = 4;
const
  NewTypeAccount  = "¥­α¨®­­λ©";

import deprintr, OperCode, alg_vars;

macro GetDepTypeIdentCharz

  file dtyp ("sb_dtyp.dbt") key 2;

  rewind(dtyp);
  dtyp.FlagCur = ALG_DEPOSITOR.IsCur;
  dtyp.Kind = NewTypeAccount;
  if(getEQ(dtyp))
    return dtyp.NewIdentChar;
  end;

  return "XX";

end;

 ALG_RESULT = OK_RES;
 if((ALG_DEPOSITOR.Type_Account == "„ ‚‘’….") and
     (ALG_SBDEPDOC.TypeOper == ‡ η¨α«¥­¨¥_‚_ _¥¦¨¬¥) and
     ((ALG_SBDEPDOC.ApplType      == …‘)      OR       /* ¥­α¨¨ */
      (ALG_SBDEPDOC.ApplType      == …‘_)   OR
      (ALG_SBDEPDOC.ApplType      == …‘_‚„)  OR
      (ALG_SBDEPDOC.ApplType      == …‘_”‘)  OR
      (ALG_SBDEPDOC.ApplType      == …‘_”‘) OR
      (ALG_SBDEPDOC.ApplType      == …‘_“€’“›)))
        ExecMacroFile("fcchdtyp.mac"); /* ­ ¨ Ά§Ά¥¤ρβ ALG_RESULT ¥α«¨ ηρ */
      else
        if((GetDepTypeIdentCharz != "XX"))                             
          StrSet(ALG_SBDEPDOC.Account, 21, GetDepTypeIdentCharz);   
          UpdateAlgRecords( UPDATE_DEPDOC, True ); 
        end;                                                         
      end;
 end;
end;