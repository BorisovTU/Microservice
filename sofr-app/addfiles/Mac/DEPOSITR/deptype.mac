/*
**  Класс "Вид вклада"
**
*/

const
  RTPC_ACCOUNT_TYPE = 1003, 
  RTPC_ACCOUNT_DEP  = 2001, 
  RTPC_ACCOUNT_ALT  = 2002, 
  RTPC_ACCOUNT_OVER = 2003, 
  RTPC_ACCOUNT_DOP  = 2004, 
  KIND_AFTER_FINISH = 3001, 
  KIND_AFTER_AUTO   = 3002, 
  OT_OP_FROM_OTHER  = 3010;

class TDepType( isCur, dtCode )

  private var
    depType = TBFile( "sb_dtyp.dbt", "r", 2 ), 
    pcApplType = TBFile( "pc_apltp.dbt", "r", 0 );

  macro inheritsOperationsFrom

    pcApplType.clear;
    pcApplType.rec.IsCur = depType.rec.FlagCur;
    pcApplType.rec.TypeRec = RTPC_ACCOUNT_TYPE;
    pcApplType.rec.Type = depType.rec.Kind;
    pcApplType.rec.ApplType = OT_OP_FROM_OTHER;
    if ( pcApplType.getEQ )
      return pcApplType.rec.ApType;
    else
      return depType.rec.Kind;  
    end;
  end;

  depType.rec.FlagCur = isCur;
  depType.rec.Kind = dtCode;
  if ( not depType.getEQ )
    runError( "Вид вклада не найден: " + dtCode );
  end;
end;