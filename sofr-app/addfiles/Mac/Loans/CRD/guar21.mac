/*------------------------------------------------------------------------------
                     Библиотека интерпретируемых модулей

 Filename    : guar21.mac
 Description : Создание документа по шагу операции
               Начисление РВП оффш.

 Programmer  : KOE
 11.08.05    : Создан
------------------------------------------------------------------------------*/
import SbCrdInter, Total;

file   RG137PHist  ("hrg137p.dbt",  "loans.def");
record ШагОперации ("step_op.dbt",  "loans.def");     /* Запись шага операции */
record Документ    ("doc_acc.dbt",  "loans.def");     /* Буфер документа      */
record Операция    ("crd_op.dbt",   "loans.def");     /* Операция по договору */
record Договор     ("credit_c.dbt", "loans.def");
record Портфель    ("lbrfcase.dbt", "loans.def");     /* Портфель             */
record OpParm      ("crd_op_parm.dbt", "loans.def");

MACRO ВыполнитьШаг (OperDate, Sum, Data, mbperc, ObjectID)
    VAR stat  : integer =  0;

    if(OpParm.SPOD == 1) //если включен флаг "Отражение СПОД", то шаг не выполняется.
       return 0;
    end;
      
    RETURN stat;
END;