import "rsbus_structs.mac";
//Константы номеров сервереров из PRJ_001517_Список сервисов
const NumServ_InsertCreditContract:integer = 1;
const NumServ_UpdateCreditContract:integer = 2;
const NumServ_InsertAccount:integer = 3;
const NumServ_InsertEnsGarant:integer = 4;
const NumServ_InsertEnsZalog:integer = 5;
const NumServ_ChangeGuarantyData:integer = 6;
const NumServ_ChangeCollateralData:integer = 7;
const NumServ_InsertEnsZalogObject:integer = 8;
const NumServ_ChEnsObject:integer = 9;
const NumServ_DelEnsZalogObject:integer = 10;
const NumServ_CloseAccount:integer = 11;
const NumServ_InsertOvCardContract:integer = 12;
const NumServ_InsertPayPlan:integer = 13;
const NumServ_InsertAdvancedRepayment:integer = 14;
const NumServ_UpdateAccount:integer = 15;
const NumServ_UpdateAccountRollback:integer = 16;
const NumServ_ChangeLimit:integer = 17;
const NumServ_PayOnCalcAccount:integer = 18;
const NumServ_InsertSPI:integer = 19;
const NumServ_CloseGuarantyContr:integer = 20;
const NumServ_CloseCollateralContr:integer = 21;

const NumServ_Calculate_Payments:integer = 100;
const NumServ_GetCreditContract:integer = 101;
const NumServ_Calculate_Debt:integer = 102;
const NumServ_MakeAccountStatement:integer = 103;
const NumServ_MakeGuarantyData:integer = 104;
const NumServ_MakeCollateralData:integer = 105;

const NumServ_GetSetAccount:integer = 107;
const NumServ_GetFactDutyPayments:integer = 108;
const NumServ_GetEnsZalogObject:integer = 109;
const NumServ_GetAccountData:integer = 110;


//Класс флагов провеки пользовательских условий
//Каждый флаг включает/выключает проверку
//true - пропустить условие(проверка не выполняется)
//false - проверить условие (провека выполняется)
class Tskip_user_check
   var InsertCreditContract    :bool;
   var UpdateCreditContract    :bool;
   var InsertPayPlan    :bool;
   var InsertAccount    :bool; 
   var InsertEnsGarant  :bool;
   var InsertEnsZalog  :bool;
   var InsertAdvancedRepayment  :bool;
   var MakeAccountStatement  :bool;
   var MakeGuarantyData  :bool;
   var MakeCollateralData  :bool;
   var ChangeGuarantyData  :bool;
   var ChangeCollateralData  :bool;
   var InsertEnsZalogObject  :bool;
   var PayOnCalcAccount  :bool;
   var GetCreditContract  :bool;
   var Calculate_Debt  :bool;
   var InsertSPI: bool;
   var GetEnsZalogObject: bool;
   var ChEnsObject: bool;
   var DelEnsZalogObject: bool; 
   var Calculate_Payments: bool;
   var CloseGuarantyContr: bool; 
   var CloseCollateralContr: bool;
   var GetAccountData: bool;  
   var CloseAccount: bool;
   var InsertOvCardContract: bool;   
   var UpdateAccount: bool;
   var UpdateAccountRollback: bool;   
   var GetSetAccount: bool;
   var GetFactDutyPayments: bool;   
   var ChangeLimit: bool;    
END;

var skip_user_chec:Tskip_user_check;
skip_user_chec.InsertCreditContract  = true;
skip_user_chec.InsertPayPlan   = true;
skip_user_chec.InsertAccount   = true;
skip_user_chec.InsertEnsGarant   = true;
skip_user_chec.InsertEnsZalog   = true;
skip_user_chec.InsertAdvancedRepayment   = true;
skip_user_chec.MakeAccountStatement   = true;
skip_user_chec.MakeGuarantyData   = true;
skip_user_chec.MakeCollateralData   = true;
skip_user_chec.ChangeGuarantyData   = true;
skip_user_chec.ChangeCollateralData   = true;
skip_user_chec.InsertEnsZalogObject   = true;
skip_user_chec.PayOnCalcAccount   = true;
skip_user_chec.UpdateCreditContract   = true;
skip_user_chec.GetCreditContract   = true;
skip_user_chec.Calculate_Debt   = true;
skip_user_chec.InsertSPI  = true;
skip_user_chec.GetEnsZalogObject  = true;
skip_user_chec.ChEnsObject  = true;
skip_user_chec.DelEnsZalogObject  = true;
skip_user_chec.Calculate_Payments  = true;
skip_user_chec.CloseGuarantyContr  = true;
skip_user_chec.CloseCollateralContr  = true;
skip_user_chec.GetAccountData  = true;
skip_user_chec.CloseAccount  = true;
skip_user_chec.InsertOvCardContract  = true;
skip_user_chec.UpdateAccount  = true;
skip_user_chec.UpdateAccountRollback  = true;
skip_user_chec.GetSetAccount  = true;
skip_user_chec.GetFactDutyPayments  = true;
skip_user_chec.ChangeLimit  = true;

//NumServ - порядковый номер сервера
//operdate - дата операции
//BusCrd - КД
// mode - режим работы
// 1 - Вставка/Открытие КД
// 0 -  Изменение
macro InsertCreditContractUserCheck(NumServ:integer,operdate:date, BusCrd:TCreditContr)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end; 
     return true;	
end;

//NumServ - порядковый номер сервера
//operdate - дата операции
//BusCrd - КД
macro UpdateCreditContractUserCheck(NumServ:integer,operdate:date, BusCrd:TCreditContr)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end; 
     return true;	
end;

//NumServ - порядковый номер сервера
//PlanPay - данные по графикам погашения(используем тип TPay)
//Comiss -  данные по графикам коммисий(используем тип TCommiss)
macro InsertPayPlanUserCheck(NumServ:integer,PlanPay:TArray, Comiss:TArray)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//LoansAccount - список отрываемых счетов
macro InsertAccountUserCheck(NumServ:integer,LoansAccount:TArray)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//CreditID	- ID кредитного договора 
//CreditNumber - номер кредитного договора
//OperDate - дата операции
//ensContr - обеспечение
macro InsertEnsGarantUserCheck(NumServ:integer,CreditID:integer, CreditNumber:string, OperDate:date,ensContr :TEns)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//CreditID	- ID кредитного договора 
//CreditNumber - номер кредитного договора
//OperDate - дата операции
//ensContr - обеспечение
macro InsertEnsZalogUserCheck(NumServ:integer,CreditID:integer, CreditNumber:string, OperDate:date,ensContr:TEns)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - это record credContr(credit_c);
//operDate:date,                // Дата операции
//DutySum:money,                     // Сумма погашения
macro InsertAdvancedRepaymentUserCheck(NumServ:integer,credContr, operDate:date,DutySum:money)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;			

//NumServ - порядковый номер сервера
//credContr - это record credContr(credit_c);
//AccountType:integer - Номер категории учета для счета (справочник LOANS)
//BeginDate:date - Дата начала периода формирования выписки.
//EndDate:date - Дата окончания периода формирования выписки.
macro MakeAccountStatementUserCheck(NumServ:integer,credContr, AccountType:integer,BeginDate:date,EndDate:date)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//ensBuff  - это record ensBuff    ("enscontr.dbt");
macro MakeGuarantyDataUserCheck(NumServ:integer,ensBuff)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//ensBuff  - это record ensBuff    ("enscontr.dbt");
macro MakeCollateralDataUserCheck(NumServ:integer,ensBuff)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//ensBuff  - это record ensBuff    ("enscontr.dbt");
macro ChangeGuarantyDataUserCheck(NumServ:integer,ensBuff)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//ensBuff  - это record ensBuff    ("enscontr.dbt");
macro ChangeCollateralDataUserCheck(NumServ:integer,ensBuff)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//crdRec - это record crdRec(credit_c);
//ContractID :integer - ID договора залога
//ContractNumber :string - номер договора залога
//Obj: TArray(TEnsZalogObj) - объекты залога
macro InsertEnsZalogObjectUserCheck(NumServ:integer,crdRec,ContractID :integer,ContractNumber :string,Obj: TArray)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - это record credContr(credit_c);
//operDate:date	- Дата проведения операции 
//Sum:money	- Сумма, выдаваемая по КД
macro PayOnCalcAccountUserCheck(NumServ:integer,credContr,operDate:date,Sum:money)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - это record credContr(credit_c);
macro GetCreditContractUserCheck(NumServ:integer,credContr)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - это record credContr(credit_c);
macro Calculate_DebtUserCheck(NumServ:integer,credContr)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - это record credContr(credit_c);
//AccountArray - массив TSetAccount
macro InsertSPIUserCheck(NumServ:integer,credContr,AccountArray:TArray)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//ensBuff - это record ensBuff ("enscontr.dbt");;
//EnsObjReqInfo - массив TEnsObjReqInfo
macro GetEnsZalogObjectUserCheck(NumServ:integer,ensBuff,EnsObjReqInfo:TArray)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - record credContr(credit_c);
//opEnsObjReqInfo:TEnsObjReqInfo - данные по предмету залога
//opEnsObject:TEnsObjCh -  предмет залога
macro ChEnsObjectUserCheck(NumServ:integer,credContr,opEnsObjReqInfo:TEnsObjReqInfo,opEnsObject:TEnsObjCh)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//crdRec - record credContr(credit_c);
//ensRec record ensRec(enscontr)
//EnsObjReqInfo:TEnsObjReqInfo - данные по предмету залога
macro DelEnsZalogObjectUserCheck(NumServ:integer,crdRec,ensRec,opEnsObjReqInfo:TEnsObjReqInfo)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - record credContr(credit_c);
//ensID - ID ДО
//OperDate - дата рассчета
macro CloseGuarantyContrUserCheck(NumServ:integer,credContr,ensID:integer,OperDate:date)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - record credContr(credit_c);
//ensID - ID ДО
//OperDate - дата рассчета
macro CloseCollateralContrUserCheck(NumServ:integer,credContr,ensID:integer,OperDate:date)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - record credContr(credit_c);
//sb_account - record sb_account(sb_acc)
macro GetAccountDataUserCheck(NumServ:integer,credContr,sb_account)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - record credContr(credit_c);
//sb_account - record sb_account(sb_acc)
macro CloseAccountUserCheck(NumServ:integer,credContr,sb_account)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//пока один параметр так как сервис не реализован
macro InsertOvCardContractUserCheck(NumServ:integer)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//creditID: Integer - ID КД 
//creditNumber: String - Номер КД 
//credContr - record credContr(credit_c);
//accRec - record accRec(acc_crd)
macro UpdateAccountUserCheck(NumServ:integer,creditID: Integer, creditNumber: String,credContr,accRec)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//creditID: Integer - ID КД 
//creditNumber: String - Номер КД 
//credContr - record credContr(credit_c);
macro UpdateAccountRollbackUserCheck(NumServ:integer,creditID: Integer, creditNumber: String,credContr)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - record credContr(credit_c);
//TypeAccList - массив значнений типа integer с типами СПИ 
macro GetSetACcountUserCheck(NumServ:integer,credContr,TypeAccList:TArray)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - record credContr(credit_c);
//BeginDate:date - Дата начала периода, за который необходимо получить данные о погашениях
//EndDate:date - Дата окончания периода, за который необходимо получить данные погашениях
//TypeOperList - Список видов операций погашения, операции по которым должны быть отобраны.
macro GetFactDutyPaymentsUserCheck(NumServ:integer,credContr,BeginDate:date,EndDate:date,TypeOperList:TArray)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - record credContr(credit_c);
//OperDate:date - дата операции
//LimitSum:money - сумма устанавливаемого лимита
//LimitType:integer - тип лимита
macro ChangeLimitUserCheck(NumServ:integer,credContr,OperDate:date,LimitSum:money,LimitType:integer)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

//NumServ - порядковый номер сервера
//credContr - record credContr(credit_c);
//calcDate:date - дата вычисления
//CloseCreditDeal: bool - Признак полного досрочного погашения
// UseAccountRest: bool - Признак учитывать остаток на расчетном счете клиента
macro Calculate_PaymentsUserCheck(NumServ:integer,credContr,calcDate:date,CloseCreditDeal:bool,UseAccountRest:bool)
//   Пример обработки ошибки
//   if(Условие возникновения ошибки)
//      RunError("Текст ошибки", Целое число - номер ошибки);
//    end;
     return true;	
end;

			