//-----------------------------------------------------------------------------
// Блок     : 281001 - "Предобработка платежа банка"
//            282001 - "Предобработка требования банка"
//            283001 - "Предобработка клиентского платежа"
//            285001 - "Предобработка мемориального документа"
// Описание : Определение бэк-офиса
//-----------------------------------------------------------------------------
import PaymInter, "cbsttls.mac", "cbdefbo.mac";

MACRO ОпределениеБэкОфиса( Payment:RsbPayment ):integer

  if( not Payment.ToBackOffice )
    Payment.ToBackOffice = DefineToBackOffice( Payment );
  end;

  if( (Payment.ToBackOffice) and (not Payment.NotForBackOffice) )
    if( УстановитьСтатусыПлатежа( OPR_PAYM_BO_PROCESS, OPR_PAYM_ST_BO_YES,
                                  OPR_PAYM_PZO,        OPR_PAYM_ST_PZO_NOTNEED ) )
      MsgBox("Ошибка при установке сегментов статуса экземпляра операции");
      return 1;
    end;
  end;

  return 0;

END;
