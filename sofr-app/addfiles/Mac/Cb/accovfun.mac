//-----------------------------------------------------------------------------
// Блок     : Вне блока
// Шаг      : Вне шага
// Описание : Различные функции для процедуры обработки овердрафта
//-----------------------------------------------------------------------------
import "cat_acc.mac";

//------------------------------------------------------------------------------
// Первичный документ для категорий
//------------------------------------------------------------------------------
CLASS (TCommonFirstDoc) Acc_FirstDoc( parm1, parm2 )

//------------------------------------------------------------------------------
// данные класса
//------------------------------------------------------------------------------
  VAR
    account = TRecHandler( "account.dbt" );

//------------------------------------------------------------------------------
// инициализация массива
//------------------------------------------------------------------------------
  MACRO InitParmArray

    ParmA[regList.registration(MC_TYPE_PARAMETR_DOCKIND   )] = 3; //DLDOC_ACCOUNT;
    ParmA[regList.registration(MC_TYPE_PARAMETR_DOCID     )] = Id;
    ParmA[regList.registration(MC_TYPE_PARAMETR_OWNER     )] = {OurBank};
    ParmA[regList.registration(MC_TYPE_PARAMETR_DEPARTMENT)] = account.rec.Department;

    FIRoleBArray[0] = 0;
  END;

//------------------------------------------------------------------------------
// конструктор
//------------------------------------------------------------------------------
  copy( account, parm1 );

  Id = parm2;

  InitTCommonFirstDoc();

  InitParmArray();
  Kind = ParmA[MC_TYPE_PARAMETR_DOCKIND];
END;
//------------------------------------------------------------------------------
