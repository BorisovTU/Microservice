 /*
 $Name: ws_ficlass.mac
 $Module: Главная книга
 $Description: Макрос ФИ
 */

class TWsFinInstr(i/*:integer*/, c:string, c2:string, k:integer, a:integer, n:string, in:string, cy:string, cia:string, dif:string)
  var Fiid;
  if( i == null )
    Fiid = -1;
  else
    Fiid = i;
  end;
  var CodeWidget    = c;
  var CodeList      = c2;
  var Kind          = k;
  var AvoirKind     = a;
  var Name          = n;
  var ISO_Number    = in;
  var CCY           = cy;
  var CodeInAccount = cia;
  var Definition    = dif;
end;

class TWsFinInstrFltrParm
  var FIKinds = null;
  var AvoirKinds = null;
  var IncSubAvKinds = null;
  var TaxGroups = null;
  var NotInTaxGrp = null;
  var CodeKindWidget = 1;
  var CodeKindList = 1;
  var FICode = null;
  var FindFIID = null;
  var LikeFICode = null;
  var IsClosed = null;
end;

class TWsFIRateHist
  var RateID      ;
  var RateValue   ;
  var Scale       ;
  var Point       ;
  var SinceDate   ;
  var IsInverse   ;
  var IsRelative  ;
  var BaseCurr    ;
  var BaseCurrName;
  var QuotCurr    ;
  var QuotCurrName;
  var InputDate   ;
  var InputTime   ;
  var Oper        ;
  var IsManualInput ;
end;

class TWsFiRateInstr
  var ID   :integer; // Идентификатор финансового инструмента dfininstr_dbt.t_FIID
  var Code :string ; // Код ФИ dfininstr_dbt.t_FI_Code
  var Name :string ; // Наименование ФИ dfininstr_dbt.t_Name
end;

class TWsFIRateType
  var TypeID        :integer; // dratetype_dbt.t_Type
  var TypeName      :String ; // dratetype_dbt.t_TypeName
  var IsMarketPlace :bool ; // dratetype_dbt.t_IsMarketPlace
end;

class TWsFIRateParty
  var ID   :integer; // Идентификатор субъекта экономики  dparty_dbt.t_PartyID
  var Code :string ; // Код вида 1                            
  var Name :string ; // Полное наименование субъекта dparty_dbt.t_Name    
  var ShortName : string;   // Сокращенное название субъекта dparty_dbt.t_ShortName  
end;

class TWsFIRateSection
  var ID   :integer; //dptoffice_dbt.t_OfficeID
  var Code :string ; //dptoffice_dbt.t_OfficeCode
  var Name :string ; //dptoffice_dbt.t_OfficeName
end;

class TWsFIRateOper
  var Num  :integer; // dperson_dbt.t_Oper
  var Name :string ; // dperson_dbt.t_Name
end;

class TWsFIRateValue
  var RateID    :integer; // Идентификатор курса (котировки)
  var IsInverse :bool;    // Признак обратной котировки
  var IsRelative:bool;
  var Rate      :double;  // Значение курса
  var Scale     :integer; // Масштаб курса - количество единиц базового инструмента
  var Point     :integer; // Количество разрядов после запятой
  var InputDate :date;    // Системная дата ввода курса
  var InputTime :time;    // Системное время ввода курса
  var OperNum   :integer;//: TWsFIRateOper Номер и ФИО пользователя, который ввел значение
  var OperName  :string;
  var SinceDate :Date;    // 
end;


class TWsFIRateDef
  var RateID        :integer;
  var RateName      :string ;
  var BaseFI        ;//TWsFiRateInstr
  var QuotFI        ;//TWsFiRateInstr
  var RateType      ;//TWsFIRateType
  var IsRelative    :bool;
  var Informator    ;//TWsFIRateParty
  var MarketPlace   ;//TWsFIRateParty
  var Section       ;//TWsFIRateSection
  var Comment       :string;
  var RateValue     ;//TWsFIRateValue;
  var IsDominant    :bool;
  var Version       :integer;
  var IsManualInput ;
  var IsDelete      :bool;
end;


class TWsFISaveRate
  var RateID             :integer;      
  var BaseFIID           :integer;      
  var QuotFIID           :integer;      
  var RateName           :string;       
  var Comment            :string;        
  var RateTypeID         :integer;
  var IsRelative         :bool;     
  var InformatorID       :integer;  
  var MarketPlaceID      :integer; 
  var RateValueIsInverse :bool;
  var RateValueRate      :double;     
  var RateValueScale     :integer;    
  var RateValuePoint     :integer;    
  var RateValueInputDate :date;
  var RateValueInputTime :time;
  var RateValueOperNum   :integer;  
  var RateValueSinceDate :Date;
  var SectionID          :integer;         
end;

class TWsCurrentSessionData
  var Oper       : integer;
  var OperName   : string;
  var OperObj    ;
  var CurDate    : date;
end;
class TWsFIActualRate(r:double, d:date, _isDominant : bool )
  var Rate       = r;
  var SinceDate  = d;
  var isDominant = _isDominant;
end;

class TWsCurCountry(fic:string, cnc:string, cna:string)
  var FICode   = fic;
  var CntrCode = cnc;
  var CntrName = cna;
end;

class TWsCurObjCode(k:integer, c:string)
  var Kind = k;
  var Code = c;
end;

class TWsCurrency
  var Fi        ;      // TWsFinInstr   
  var IsoCur    ;           
  var Rate      ;      // TWsFIActualRate          
  var Countries ;      // Array of TWsCurCountry   
  var ObjCodes  ;      // Array of TWsCurObjCode   
  var Lsin      ;      // String                   
  var Isin      ;      // String                    
  var CodeKind  ;      // Integer                 
end;

class TWsIsoCur(Name:string, Number:string, Code:string, IsRev:bool)
  var NameCurr   = Name;
  var NumberCode = Number;
  var ISOCode    = Code;
  var IsRevoked  = IsRev;
end;
