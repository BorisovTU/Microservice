/*
$Name:        settacc.mac
$Module:      Ядро ГКБО
$Description: макросы скроллинга  Параметры выбора СПИ (Alt-2  из скроллинга субъектов)
*/

import check_pmautoac;

private Record ПараметрыВыбораСПИ(       pmautoac ); // оригинал
private Record СтарыеПараметрыВыбораСПИ( pmautoac ); // копия. 

private Record СПИ(       settacc );          // оригинал
private Record ДоВсехИзмененийСПИ( settacc ); // копия. СПИ, которая была при вызове панели редактирования. 
private Record СтараяСПИ( settacc );          // копия. СПИ после выбора СПИ из списка или "ДоВсехИзмененийСПИ" если выбора не было. Изменения в конкретной СПИ сравнивать с ней.

           
private macro Новые_ПараметрыВыбораСПИ()
   return  0;
end;

// Режимы: 
// OBJ_INSERT - вставка
// OBJ_UPDATE - редактирование
// OBJ_DELETE - удаление 
private macro Проверить_ПараметрыВыбораСПИ( Режим )
   if ((Режим == 3/*OBJ_UPDATE*/) or (Режим == 1/*OBJ_DELETE*/))
     if (checkPmStatus(СтарыеПараметрыВыбораСПИ.partyId, СтарыеПараметрыВыбораСПИ.serviceKind))
       if( not getTrue( FALSE, "Продолжить " + ternary(Режим == 3,"сохранение","удаление") +  " несмотря на наличие незавершенных платежей?" ) )
         return 1;
       else
         return 0;
       end;
     end;
   end;
   return  0;
end;

private macro ФункцияПользователя_ПараметрыВыбораСПИ( )
   return 0;
end;
