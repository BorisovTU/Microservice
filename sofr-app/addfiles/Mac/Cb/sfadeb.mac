/*

(c)2002 R-Style Softlab

RS-Bank 5.1

Пример макроса задания предусловия алгоритма расчета ПЗО

Фильтр всех дебетовых платежей

*/
record sfcontr ("sfcontr.dbt");
record PmPaym("pmpaym.dbt");
record ppd("pmprop.dbt");
record ppk("pmprop.dbt");
file PmProp("pmprop.dbt");

macro FindPayment(PaymentID, DebetCredit)
  PmProp.PaymentID = PaymentID;
  PmProp.DebetCredit = DebetCredit;
  return GetEQ(PmProp);
end;

macro IsRecordInCalc(sfcontraddr, pmpaymaddr)

  setbuff(sfcontr, sfcontraddr);
  setbuff(PmPaym, pmpaymaddr);

  if (FindPayment(PmPaym.PaymentID, 0))
    copy(ppd,PmProp);
  else
    ClearRecord(ppd);
  end;

  if ((ppd.PaymentID != 0) and ((ppd.IsSender == "") or (ppd.IsSender == "X")))
    msgbox(1);
    return 1;
  end;
    msgbox(0);
  return 0;
end;

