/*
     Выбор криптосистемы
 */
import BankInter;

macro CryptoSysName( id )
   FILE sgnsys ( sgnsys ) key 0 ;

   sgnsys.CryptoSysID = id;
   if ( GetEQ( sgnsys ) )
      return sgnsys.Name;
   end;

   return "?" ;
end;



macro SelectCryptoSys( arr )

   VAR i = 0;
   VAR str = Tarray;

   while ( i < arr.Size )
      str(i) = CryptoSysName( arr(i) );
      i = i + 1;
   end;

   i = menu( str , "" , "Криптосистема:" ) ;
   if ( i>=0 )
      return arr(i);
   elif(not GetDialogFlag()) /* В этом случае пользоваетль меню на экран не получал. Предупреждаем его о наличии нескольких ролей ЭЦП */
//      MsgBox("В системе задано нескольких ролей ЭЦП");
      return -1;
   else
      return 0;
   end;

end;
