/*
   "Финансовый мониторинг"
   Макрос скроллинга операций по легализации
*/
Import BankInter, FMInter;

record Операция("opcontr.dbt");
record СтараяОперация("opcontr.dbt"); /* заполняется при редактировании */

/* Макрофункция инициализации новой операции */
/*
   необходимо заполнить структуру "Операция"
   возвращаемое значение
   0 - ошибок не было
   1 - была ошибка
*/
macro НоваяОперация()
  
  return 0;

end;


/* Макрофункция проверки операции при вводе, редактировании, удалении */
/*
   0 - ошибок не было
   1 - была ошибка
*/
macro ПроверитьОперацию( Режим )

  var stat;
  stat = true;

  if( Режим == FM_INSERT ) /* ввод новой операции */

  elif( Режим == FM_UPDATE ) /* редактирование операции */

  elif( Режим == FM_DELETE ) /* удаление операции */

  elif( Режим == FM_CHANGE_STATUS )  /* смена статуса */
  
  end;

  if( stat )
    return 0;
  else
    return 1;
  end;
  
end;


/* Макрофункция вызывается по Ctrl-Z */
macro ФункцияПользователя()
end;

/* Установка подсказки для скролингов из макроса */
MACRO УстановитьПодсказку( TableName:string, IndexNum:integer, DefaultHint:string, Mode:integer, ScrolStates:integer ):string
  //  Возможные значения Mode:
  //   0, Список операций
  //   1, Список экспортированных операций
  //   2, Список импортированных операций

  //  Возможные значения ScrolStates:
  //   0, Список всех операций   
  //   1, Список операций для контроля   
  //   2, Список операций для визирования   
  //   3, Список операций для выгрузки   
  //   4, Список отложенных операций   
  //   5, Список выгруженных операций
  //   6, Список приостановленных операций  
  //   7, Не используется
  //   8, Список отвергнутых операций
      
  return "/*+ FIRST_ROWS USE_NL(t ptpayer fm_opr_scrol ptreceiverl dp_dep fininstr namealg opcontrseance oprkdoc) */"; 
  
//  return DefaultHint;
END;
