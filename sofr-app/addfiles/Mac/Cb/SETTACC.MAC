/*
$Name:        settacc.mac
$Module:      Ядро ГКБО
$Description: макросы скроллинга  Стандартные платежные инструкции (Ctrl-2  из скроллинга субъектов)
*/

import check_pmautoac;

private Record СПИ(       settacc ); // оригинал.
private Record СтараяСПИ( settacc ); // копия. 

private macro Новая_СПИ()
   return  0;
end;

// Режимы: 
// OBJ_INSERT - вставка
// OBJ_UPDATE - редактирование
// OBJ_DELETE - удаление 
private macro Проверить_СПИ( Режим )
   if ((Режим == 3/*OBJ_UPDATE*/) or (Режим == 1/*OBJ_DELETE*/))
     if (checkPmStatus(СтараяСПИ.partyId, -1, СтараяСПИ.settaccid))
       if( not getTrue( FALSE, "Продолжить " + ternary(Режим == 3,"сохранение","удаление") +  " несмотря на наличие незавершенных платежей?" ) )
         return 1;
       else
         return 0;
       end;
     end;
   end;
   return  0;
end;

private macro ФункцияПользователя_СПИ( )
   return 0;
end;
