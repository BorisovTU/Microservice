/*
$Name:        rccrep_form.mac
$Module:      БО ЦБ
$Description: Панель отчета "Реестр договоров клиентов для РЕПО с ЦК"
*/

import "DlRepForm_h.mac", "globals.mac", "dlmisc.mac";

/*Номера полей в форме отчета*/
CONST PNFLD_RCCREP_DATE             = 0;

PRIVATE MACRO DL_FldProc_Date( pThis:DL_CPanel, Cmd:INTEGER, Key:INTEGER, FldShowValue:@VARIANT, FldRealValue:@VARIANT ):INTEGER
  if( Cmd == DLG_INIT )
    if( FldRealValue == null ) /*инициализация по умолчанию*/
      FldRealValue = {curdate};
    end;

    FldShowValue = FldRealValue;
  elif( Cmd == DLG_CHANGEVALUE ) /*значение поля было изменено*/
    FldRealValue = FldShowValue;
  end;
  return CM_DEFAULT;
END;


PRIVATE CONST H_SECUR_CODE = 109;
CLASS (DL_CPanel) DL_RCCREP_Form()
  
  PRIVATE MACRO Init()

     AddFieldProc( 0, PNFLD_RCCREP_DATE,  H_SECUR_CODE,  @DL_FldProc_Date );
  END;

  PRIVATE MACRO Check():BOOL
  
     return true;
  END;

  initDL_CPanel( "sp_repu.lbr", "RCCREP" ); 
END;