//А.Киселев 25.07.2019 Request на получение из Бисквит данных по загруженным счетам в Бисквит из СОФР
import globals;


private class TIntegrationSymbolicIdentifierX
var ObjectId :string,
    SystemId :string,
    SystemNodeId :string;

end;


private class TPostingParameters( AccountMask_ :string )
var AccountMask :string;

 private macro InitConditions( AccountMask_ :string )

  if( (ValType(AccountMask_) != V_UNDEF) and (ValType(AccountMask_) != 26) and (AccountMask_ != "") )
   AccountMask = AccountMask_;
  end;

 end;

 InitConditions( AccountMask_ );

end;


private class TConditions( RestDate_ :date, BranchId_ :string )
var RestDate :date,
    BranchId :string;

 private macro InitConditions( RestDate_ :date, BranchId_ :string )

   if( (ValType(RestDate_) != V_UNDEF) and (ValType(RestDate_) != 26) and (RestDate_ != date("00.00.00")) )
    RestDate = RestDate_;
   end;

   if( (ValType(BranchId_) != V_UNDEF) and (ValType(BranchId_) != 26) and (BranchId_ != "") )
    BranchId = BranchId_;
   end;

 end;

 InitConditions( RestDate_, BranchId_ );

end;


private class TGetAcctForVerifyReq(  ReqId :string )
   var RequestId :string /*TIntegrationSymbolicIdentifierX*/,
       Conditions :TConditions,
       PostingParametersList :object /*TArray*/;


   private macro InitGetAcctForVerifyReq( ReqId :string )


    if( (ValType(ReqId) != V_UNDEF) and (ValType(ReqId) != 26) and (ReqId != "") )
//     RequestId = TIntegrationSymbolicIdentifierX();
     RequestId /*.ObjectId*/ = ReqId;
    end;

   end;


   macro AddConditins( RestDate :date, BranchId :string )

     Conditions = TConditions( RestDate :date, BranchId :string );

   end;

   macro AddAcct( AccountMask :string )
   var Acct :TPostingParameters;

      Acct = Null;
      Acct = TPostingParameters( AccountMask );
      if( ValType(PostingParametersList) == V_UNDEF )
       PostingParametersList = TArray();
      end;
      PostingParametersList[PostingParametersList.Size] = Acct;
      Acct = Null;
   end;

   InitGetAcctForVerifyReq( ReqId );

end;

      
private class TGetAcctForVerifyReqMsg( ReqId :string )
var GetAcctForVerifyReq;

   GetAcctForVerifyReq = TGetAcctForVerifyReq( ReqId );

end;   
 

private class TGetAcctForVerifyRequest( ReqId :string )
var GetAcctForVerifyReqMsg :TGetAcctForVerifyReqMsg;

 GetAcctForVerifyReqMsg = TGetAcctForVerifyReqMsg( ReqId );
 
end;


macro GetAcctForVerifyReq( ReqId :string ) //параметры запроса
var req_obj :TGetAcctForVerifyRequest;

  req_obj = TGetAcctForVerifyRequest( ReqId );

  return req_obj;
end;


/*
var rq_res;

rq_res = GetAcctForVerifyReq("7613db77-2256-4feb-90b9-e208c9892f82");
rq_res.GetAcctForVerifyReqMsg.GetAcctForVerifyReq.AddConditins( {CurDate} );
rq_res.GetAcctForVerifyReqMsg.GetAcctForVerifyReq.AddAcct( "89756959", "070970970" );
rq_res.GetAcctForVerifyReqMsg.GetAcctForVerifyReq.AddAcct( "897999999959", "0709711111111" );

MsgBox("BEBEBEBEB");
*/
