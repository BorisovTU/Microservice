/******************************************************************************\

		 Стандартный макрос по расчету штрафа за просрочку 

			Программист: Крестьянинов Е.А.

\******************************************************************************/
import DeprIntr,CommonInter,stpencls;
// CalcType
// 0 - расчет просрочки
// 1 - расчет неучтойки
macro GetPenalty( Contract,Tarif, Expession, CalcType )
  var Sum = 0,penDays = 0;

  if( CalcType == null )
    CalcType = 0;
  end;

  if( CalcType == 1 )
    return String( 0 ) + "|" + String( 0 );
  end;

  penDays = GetPenaltyDays( Contract );
  penDays = PenDays - Tarif.rec.PrivilegeDays;

  if( penDays > 0 )
    if( valtype(Expession) != V_UNDEF )
      Sum = Int(Expession);
    end;
  else
    penDays = 0;
  end;

  return String( Sum ) + "|" + String( penDays );

end;