/*   Стандартный откат операции  */
import stforcel;

private var rollbackdata  = CreateRollbackDataObject();  /* Обьект, необходимый для отката */

macro TrnProc
var stat;

  stat = rollbackdata.footprint.rollback();
  if(not stat)
    AbortTrn();
  end;
 
end;

    if(ProcessTrn( 1, "TrnProc") )
      if ( rollbackdata.isPack == false )
        MsgBox("Откат операции прошел успешно");
      end;
    else
      if ( rollbackdata.isPack == false )
        rollbackdata.footprint.displayErrorMessage();
        MsgBox("Откат операции прошел с ошибками");
      end;
    end;
end;