/*
  $Name:        lc010_10.mac
  $Module:      Документарные аккредитивы
  $Description: Макрос шага
*/

// --------------------------------------------------------------------
//         Автоматизированная банковская система RS-Bank v6.0
//                 Copyright (c) R-Style Software Lab
//
//  Назначение  : Макрос шага
//
//  Описание    : Операция - 3411   - "Аккредитив"
//                Блок     - 341010 - "Платеж по возмещению"
//                Шаг      - 10     - "Платеж по возмещению"
//
//  Программист : Чукина Т.А.
//
//  Создан      : 15.07.2013
//
// --------------------------------------------------------------------

IMPORT LCInter, lc_common, likepy;

var LCDocObj:RsbLetterOfCredit;

macro needCreatePaym_10_10(RecLcpay : TRecHandler) : bool
  return ( InList(RecLcpay.rec.State, LCPAY_COMPENSATION_STATUS_TOTRANSFER, LCPAY_COMPENSATION_STATUS_NOTPROC) // К перечислению, Не обработано
           and
           (RecLcpay.rec.DealID == 0)
         );
end;

MACRO ExecuteStep()
  return CreateCompensationPayments_BankPaym(LCDocObj, @needCreatePaym_10_10);
END;
