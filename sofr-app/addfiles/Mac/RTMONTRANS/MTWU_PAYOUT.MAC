import MTPayout;


/**************************************************************************\
|                                                                          |
\**************************************************************************/
class ( TMtOpPayout ) TMtWU_OpPayout( p_opNum, p_subOpNum, p_psId, p_initClient )

  // =====================================================================
  macro startInit( )

    var stat = startInit( );

    if ( stat and handInput )
      if ( NumFlagCur( ) == 0 )
        transfer.rec.destCode = 1;
      else
        transfer.rec.destCode = 5;
      end;

      if ( isForeignCounterparty( ) )
        transfer.rec.insideTheCountry = "";
      else
        transfer.rec.insideTheCountry = "X";
      end;
    end;

    return stat;
  end;

  // =====================================================================
  macro check( )

    var stat = check( );

    if ( stat )
      if ( ( transfer.rec.destCode == 0 ) and handInput )
        PushErrorMessage( "Задайте направление перевода" );
        stat = false;
      end;
    end;

    return stat;
  end;

  // =====================================================================
  InitTMtOpPayout( p_opNum, p_subOpNum, p_psId, p_initClient );

end;


/**************************************************************************\
|                                                                          |
\**************************************************************************/
private macro createInstance ( opNum, subOpNum, psId, NULL, initClient )

  var opPayout = TMtWU_OpPayout( opNum, subOpNum, psId, initClient ); 

  return opPayout;
end;
