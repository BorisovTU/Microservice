import MTAssign;


/**************************************************************************\
|                                                                          |
\**************************************************************************/
class ( TMtOpAssign ) TMtWU_OpAssign( p_sendAccRef, p_opNum, p_subOpNum, p_psId, p_initClient )

  // =====================================================================
  macro startInit( )

    if ( NumFlagCur( ) == 0 )
      transfer.rec.destCode = 1;
    else
      transfer.rec.destCode = 5;
    end;

    startInit( );

    if ( isForeignCounterparty( ) )
      transfer.rec.insideTheCountry = "";
    else
      transfer.rec.insideTheCountry = "X";
    end;

    return true;
  end;

  // =====================================================================
  macro check( )

    var stat = check( );

    if ( stat )
      if ( transfer.rec.destCode == 0 )
        PushErrorMessage( "Задайте направление перевода" );
        stat = false;
      end;
    end;

    /*
    if ( stat )
      if ( ( transfer.rec.destCode == 1 ) and ( transfer.rec.curCode != 0 ) and ( transfer.rec.senderNotResident == 0 ) )
        PushErrorMessage( "Для данной валюты перевода и резиденитности отправителя|выберите другое направление" );
        stat = false;
      end;
    end;
    */

    return stat;
  end;

  // =====================================================================
  macro isRubleTransferToRussia

    return ( transfer.rec.curCode == 0 ) and ( transfer.rec.destCode <= 1 );
  end;

  // =====================================================================
  InitTMtOpAssign( p_sendAccRef, p_opNum, p_subOpNum, p_psId, p_initClient );

end;


/**************************************************************************\
|                                                                          |
\**************************************************************************/
private macro createInstance ( opNum, subOpNum, psId, sendAccRef, initClient )

  var opAssign = TMtWU_OpAssign( sendAccRef, opNum, subOpNum, psId, initClient ); 

  return opAssign;
end;
