/*
$Name:           UCS_DIAlOGS.mac
$Module:         UCS
$Description:    Панели
*/

macro _event(dlg, cmd, id, key)
    return dlg.EvenMacro (dlg,cmd,id,key)
end;
class (TRecHandler) UCS_DialogRep
    var TypeRep = 0;
    var bDate = date(0,0,0);
    var eDate = date(0,0,0);
    InitTRecHandler("USC_PARM","rtusrmac.lbr",true); ; 
    macro EvenMacro(dlg, cmd, id, key)
       if(cmd == DLG_INIT)
           dlg.rec.Type = GetNameAlg(869,TypeRep);
       elif (cmd == DLG_KEY)
           if ((key == 317) AND (id ==0 ))
              TypeRep = list_alg(869,@dlg.rec.Type);
              dlg.rec.Type = GetNameAlg(869,TypeRep);
           elif(key == 316)
               bDate = dlg.rec.bDate;
               eDate = dlg.rec.eDate;
               return CM_SAVE;
           end;
       end; 
       if(TypeRep == 0)
           DisableFields(dlg,1);
           DisableFields(dlg,2);
           UpdateFields (dlg);
       else
           EnableFields(dlg,1);
           EnableFields(dlg,2);
           UpdateFields (dlg);
       end; 
       return CM_DEFAULT;
    end;
    macro Run()
        return RunDialog ( this,"_event" );
    end;
end;
