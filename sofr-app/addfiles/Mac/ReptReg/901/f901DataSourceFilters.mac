/* ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
   RS-Bank V6                                                 R-Style Softlab
   ” ©« ¯®¤á¨áâ¥¬ë "¥£« ¬¥­â¨à®¢ ­­ ï ®âç¥â­®áâì"

   ”®à¬  901. ”¨«ìâà ¨áâ®ç­¨ª  ¤ ­­ëå.

   CREATED : 20.08.2013 ABP
ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ */
class (RcbBoCbDataSourceFilter) TF901AccountRestDataSourceFilter()
    private macro constructorTF901AccountRestDataSourceFilter()
        initRcbBoCbDataSourceFilter("AccountRest", "acc");
    end;

    constructorTF901AccountRestDataSourceFilter();
end;

class (RcbDataSourceFilter) TF901FormVariableDataSourceFilter(id : String)
    macro isRowNumberIn(value : String)
        var command = "in(value.fieldValue(\"rowNumber\").exact";

        for (var i, strCut(value, ","))
            command = command + "," + "\"" + i + "\"";
        end;
        command = command + ")";

        m_filter = m_filter + command;

        return this;
    end;

    macro isRouble()
        m_filter = m_filter + "value.fieldValue(\"isRouble\").exact == \"X\"";

        return this;
    end;

    private macro constructorTF901FormVariableDataSourceFilter(id : String)
        initRcbDataSourceFilter(id, false);
    end;

    constructorTF901FormVariableDataSourceFilter(id);
end;

class (RcbDataSourceFilter) TF901PrintableFormDataSourceFilter(id : String)
    macro isRowNumberEqual(value : String)
        m_filter = m_filter + value;

        return this;
    end;

    private macro constructorTF901PrintableFormDataSourceFilter(id : String)
        initRcbDataSourceFilter(id, false);
    end;

    constructorTF901PrintableFormDataSourceFilter(id);
end;

class (RcbDataSourceFilters) TF901DataSourceFilters()
    initRcbDataSourceFilters();

    macro initialize()

        m_dataSourceFiltersPool.push_back(TF901AccountRestDataSourceFilter());
        m_dataSourceFiltersPool.push_back(TF901FormVariableDataSourceFilter("Totals"));
        m_dataSourceFiltersPool.push_back(TF901FormVariableDataSourceFilter("RoubleCheckoutData"));
        m_dataSourceFiltersPool.push_back(TF901FormVariableDataSourceFilter("ForeignCheckoutData"));
        m_dataSourceFiltersPool.push_back(TF901PrintableFormDataSourceFilter("PrintableForm"));
        m_dataSourceFiltersPool.push_back(TF901PrintableFormDataSourceFilter("PrintableCheckoutProtocol"));
    end;
end;
