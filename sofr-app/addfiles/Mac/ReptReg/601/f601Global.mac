/*
$Name:          f601Global.mac
$Module:        Регламентированная отчетность
$Description:   Форма 601. Класс, содержащий глобальные данные.
*/

/* ──────────────────────────────────────────────────────────────────────────┐
   RS-Bank V6                                                 R-Style Softlab
   Файл подсистемы "Регламентированная отчетность"

   Форма 601. Класс, содержащий глобальные данные.

   CREATED : 13.12.07 Ser.
└─────────────────────────────────────────────────────────────────────────- */
/**
 *  Общебанковские интеры и модули
 */
import rcbCoreInter;
import RcbGlobal;

/**
 *  Интеры и модели подсистемы
 */

/**
 * Глобальная ссылка для хранения одиночки.
 */
private var m_global = null;

/**
 * Класс, содержащий глобальные данные (и предоставляющий доступ к ним), а также
 * реализующий свободные функции.
 * Реализует порождающий паттерн "Одиночка" (см. Related Diagrams).
 */
class (TGlobalBase) TGlobal()
    /**
     * Ссылка на текущий отчет core-модели.
     */
    private var m_rcbReport : RcbReport = rcbApplication.currentReport;

    /**
     * В НТ для строки указано не рассчитывать по обоим подсистемам (ГК и Ритейл)
     */
    const TUNETABLE_LINE_NOCB_NORETAIL = 1;
    /**
     * В НТ для строки указано рассчитывать только по Ритейлу
     */
    const TUNETABLE_LINE_NOCB_RETAIL = 2;
    /**
     * В НТ для строки указано рассчитывать только по Главной книге
     */
    const TUNETABLE_LINE_CB_NORETAIL = 3;
    /**
     * В НТ для строки указано рассчитывать по обоим подсистемам (ГК и Ритейл)
     */
    const TUNETABLE_LINE_CB_RETAIL = 4;

    /**
     * Конструктор.
     */
    macro constructor()
        initializeRepDataPackage(m_rcbReport);
    end;

    /**
     * Получить ссылку на текущий отчет.
     */
    macro getRcbReport() : RcbReport
        return m_rcbReport;
    end;

    constructor();
end;

/**
 * Точка доступа к пространству имен.
 */
macro global() : TGlobal
    if (m_global == null)
        m_global = TGlobal();
    end;

    return m_global;
end;