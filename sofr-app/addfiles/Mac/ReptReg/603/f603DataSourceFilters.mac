/*
$Name:          f603DataSourceFilters.mac
$Module:        Регламентируемая отчетность
$Description:   Форма 603. Фильтры для источников данных
*/

class (RcbBoCbDataSourceFilter) F603RcbBoCbDataSourceFillter()
    initRcbBoCbDataSourceFilter("Account", "repaccount");

    // банк открыт на ДООП
    macro bankIsOpenedAtEndDate(alias : String)
        m_filter = m_filter + "("      + procesAlias(alias, "t_bankCloseDate") + " > " + GetSqlDate(RcbApplication().currentReport.context.period.endDate)
                              + " OR " + procesAlias(alias, "t_bankCloseDate") + " = TO_DATE('01/01/0001', 'dd/mm/yyyy')"
                            + ")";

        return this;
    end;
end;

class (RcbDataSourceFilters) F603DataSourceFilters()
    initRcbDataSourceFilters();

    macro initialize()
        m_dataSourceFiltersPool.push_back(F603RcbBoCbDataSourceFillter);
    end;
end;