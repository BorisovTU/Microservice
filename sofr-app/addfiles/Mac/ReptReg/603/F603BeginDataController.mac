class F603BeginDataController()

    var m_protocolView = TProtocolView("ПРОТОКОЛ КОНТРОЛЯ ИСХОДНЫХ ДАННЫХ");
    var m_isEmpty = true;

    private var m_dataSources = F603DataSources();

    macro execute()

        m_protocolView.setProtocolOutput(false);
        m_protocolView.printLine("ПРОТОКОЛ КОНТРОЛЯ ИСХОДНЫХ ДАННЫХ");

        var dataSourceFilter = m_dataSources.getDataSourceFilters().getFilter("Account");
        dataSourceFilter.accountIsOpened().op("AND").contractorIsBank().op("AND NOT").contractorIsLocked();

        var dataSet = m_dataSources.getDataSource("603DataSourceForBeginData").getData(dataSourceFilter);

        while (dataSet.moveNext())
            if (dataSet.coraccount == null)
                m_isEmpty = false;
                m_protocolView.printLine("Для л./c. " + dataSet.account + " отсутствует схема расчетов с банком.");
            end;
        end;

        if (m_isEmpty)
            m_protocolView.printLine("Контроль прошел успешно.");
        end;
        m_protocolView.resetProtocolOutput();
    end;

end;
