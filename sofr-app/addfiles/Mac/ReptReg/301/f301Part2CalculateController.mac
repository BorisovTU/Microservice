class (TPartCalculateController_2055U) TPart2CalculateController_2055U(reportCalculateController : Object /*TReportCalculateController*/)
    initTPartCalculateController_2055U(reportCalculateController, 2);

    macro calculateAttribute16_20_row1(attributeId : Integer)
        var attribute  = m_part.getAttribute(attributeId);
        var dataSource = m_dataSources.getBalanceDataSource();
        var rowNumber = 1;

        var value40308 = dataSource.getValue("40308", TTypeBalanceData().ruA).exact;
        var value40310 = dataSource.getValue("40310", TTypeBalanceData().ruA).exact;
        var value40306 = dataSource.getValue("40306", TTypeBalanceData().ruP).exact;
        var itogValue  = value40308 + value40310 - value40306; 

        m_reportCalculateController.getProtocolView().printLine("\nДобавляются данные:");

        printProtocolLine("\nДополнительный расчет");
        printProtocolLine("─────────────────────\n");
        printProtocolLine("Бн40308РуА + Бн40310РуА - Бн40306РуП\n");
        printProtocolLine(value40308 + " + " + value40310 + " - " + value40306 + " = " + itogValue);

        if (itogValue < $0.0)
            printProtocolLine("Результат отрицательный, для расчета полагаем равным нулю");
            itogValue = $0.0;
        end;

        printProtocolLine("\nРезультат >= 0, для расчета берем полученное значение");

        m_reportCalculateController.getProtocolView().printLine("\nГрафа" + attributeId + "_Строка" + rowNumber + " = " + attribute.getValue(rowNumber));
        attribute.plus(itogValue, rowNumber);
    end;

    private macro getCalculateAttribute16Data()
        var calculationDataPool = RcbArray();
        const attributeId = 16;

        //Строка 1
        var rowNumber = 1;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().ruA, true);

        calculationDataPool.push_back(TCalculationData(r2m(this, "calculateAttribute16_20_row1"), 
                                                       RcbArray.initialize(attributeId)));

        //Строка 2
        rowNumber = 2;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().ruA, true);

        //Строка 3
        standartSummarizeAttributeData(calculationDataPool, attributeId, true);

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;

    private macro getCalculateAttribute17Data()
        var calculationDataPool = RcbArray();
        const attributeId = 17;

        //Строка 1
        var rowNumber = 1;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().ruA, true);

        //Строка 2
        rowNumber = 2;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().ruA, true);

        //Строка 3
        standartSummarizeAttributeData(calculationDataPool, attributeId, true);

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;

    private macro getCalculateAttribute18Data()
        var calculationDataPool = RcbArray();
        const attributeId = 18;

        //Строка 1
        var rowNumber = 1;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().ruA, true);

        //Строка 2
        rowNumber = 2;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().ruA, true);

        //Строка 3
        standartSummarizeAttributeData(calculationDataPool, attributeId, true);

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;

    private macro getCalculateAttribute19Data()
        var calculationDataPool = RcbArray();
        const attributeId = 19;

        //Строка 1
        var rowNumber = 1;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().ruA, true);

        //Строка 2
        rowNumber = 2;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().ruA, true);

        //Строка 3
        standartSummarizeAttributeData(calculationDataPool, attributeId, true);

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;

    private macro getCalculateAttribute20Data()
        var calculationDataPool = RcbArray();
        const attributeId = 20;

        //Строка 1
        var rowNumber = 1;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().poA, true);

        calculationDataPool.push_back(TCalculationData(r2m(this, "calculateAttribute16_20_row1"), 
                                                       RcbArray.initialize(attributeId)));

        //Строка 2
        rowNumber = 2;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().poA, true);

        //Строка 3
        standartSummarizeAttributeData(calculationDataPool, attributeId, true);

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;

    private macro getCalculateAttribute21Data()
        var calculationDataPool = RcbArray();
        const attributeId = 21;

        //Строка 1
        var rowNumber = 1;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().poA, true);

        //Строка 2
        rowNumber = 2;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().poA, true);

        //Строка 3
        standartSummarizeAttributeData(calculationDataPool, attributeId, true);

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;

    private macro getCalculateAttribute22Data()
        var calculationDataPool = RcbArray();
        const attributeId = 22;

        //Строка 1
        var rowNumber = 1;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().poA, true);

        //Строка 2
        rowNumber = 2;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().poA, true);

        //Строка 3
        standartSummarizeAttributeData(calculationDataPool, attributeId, true);

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;

    private macro getCalculateAttribute23Data()
        var calculationDataPool = RcbArray();
        const attributeId = 23;

        //Строка 1
        var rowNumber = 1;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().poA, true);

        //Строка 2
        rowNumber = 2;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().poA, true);

        //Строка 3
        standartSummarizeAttributeData(calculationDataPool, attributeId, true);

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;

    private macro getCalculateAttribute24Data()
        var calculationDataPool = RcbArray();
        const attributeId = 24;

        //Строка 1
        var rowNumber = 1;
        calculationDataPool.push_back(TCalculationData(r2m(this, "printAttributeHead"), 
                                                       RcbArray.initialize(attributeId, rowNumber)));

        calculationDataPool.push_back(TCalculationData(r2m(this, "calculateForBalance"), 
                                                       RcbArray.initialize(attributeId, rowNumber, TTypeBalanceData().poA, "24.1")));

        calculationDataPool.push_back(TCalculationData(r2m(this, "calculateForBalance"), 
                                                       RcbArray.initialize(attributeId, rowNumber, TTypeBalanceData().__A, "24.2")));

        //Строка 2
        rowNumber = 2;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().__A, true);

        //Строка 3
        standartSummarizeAttributeData(calculationDataPool, attributeId, true);

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;

    private macro getCalculateAttribute25Data()
        var calculationDataPool = RcbArray();
        const attributeId = 25;

        //Строка 1
        var rowNumber = 1;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().__P, true);

        //Строка 2
        rowNumber = 2;
        standartCalculateAttributeData(calculationDataPool, attributeId, rowNumber, TTypeBalanceData().__P, true);

        //Строка 3
        standartSummarizeAttributeData(calculationDataPool, attributeId, true);

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;

    private macro getCalculateAttribute26Data()
        var calculationDataPool = RcbArray();
        const attributeId = 26;

        //Строка 3
        var rowNumber = 3;
        calculationDataPool.push_back(TCalculationData(r2m(this, "printAttributeHead"), 
                                                       RcbArray.initialize(attributeId, rowNumber)));

        calculationDataPool.push_back(TCalculationData(r2m(this, "calculateForBalance"), 
                                                       RcbArray.initialize(attributeId, rowNumber, TTypeBalanceData().__P, "26.1")));

        calculationDataPool.push_back(TCalculationData(r2m(this, "calculateForBalance"), 
                                                       RcbArray.initialize(attributeId, rowNumber, TTypeBalanceData().__A, "26.2", true)));

        calculationDataPool.push_back(TCalculationData(r2m(this, "calculateForBalance"), 
                                                       RcbArray.initialize(attributeId, rowNumber, TTypeBalanceData().__P, "26.3", true)));

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;

    macro execute()
        m_reportCalculateController.addCalculationAttributeData(getCalculateAttribute16Data());
        m_reportCalculateController.addCalculationAttributeData(getCalculateAttribute17Data());
        m_reportCalculateController.addCalculationAttributeData(getCalculateAttribute18Data());
        m_reportCalculateController.addCalculationAttributeData(getCalculateAttribute19Data());
        m_reportCalculateController.addCalculationAttributeData(getCalculateAttribute20Data());
        m_reportCalculateController.addCalculationAttributeData(getCalculateAttribute21Data());
        m_reportCalculateController.addCalculationAttributeData(getCalculateAttribute22Data());
        m_reportCalculateController.addCalculationAttributeData(getCalculateAttribute23Data());
        m_reportCalculateController.addCalculationAttributeData(getCalculateAttribute24Data());
        m_reportCalculateController.addCalculationAttributeData(getCalculateAttribute25Data());
        m_reportCalculateController.addCalculationAttributeData(getCalculateAttribute26Data());
    end;

end;

class (TPart2CalculateController_2055U) TPart2CalculateController_2332(reportCalculateController : Object /*TReportCalculateController*/)
    initTPart2CalculateController_2055U(reportCalculateController, 2);

    private macro getCalculateAttribute26Data()
        var calculationDataPool = RcbArray();
        const attributeId = 26;

        //Строка 3
        var rowNumber = 3;
        calculationDataPool.push_back(TCalculationData(r2m(this, "printAttributeHead"), 
                                                       RcbArray.initialize(attributeId, rowNumber)));

        calculationDataPool.push_back(TCalculationData(r2m(this, "calculateForBalance"), 
                                                       RcbArray.initialize(attributeId, rowNumber, TTypeBalanceData().__P, "26.1")));

        calculationDataPool.push_back(TCalculationData(r2m(this, "calculateForBalance"), 
                                                       RcbArray.initialize(attributeId, rowNumber, TTypeBalanceData().__A, "26.2", true)));

        var filter = m_dataSouceFilters.getAccountFilter().isSatisfiesToMasks("60202").operator("AND").hasAccountAssignedCategory(RCB_OBJGROUP_REPORT, "УККО");

        calculationDataPool.push_back(TCalculationData(r2m(this, "calculateForAccount"), 
                                                       RcbArray.initialize(attributeId, rowNumber, filter, true)));

        return TCalculationAttributeData(m_part.getAttribute(attributeId), calculationDataPool, TDependencesData());
    end;
end;
