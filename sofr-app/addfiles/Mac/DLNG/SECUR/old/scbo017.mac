/*
$Name:         scbo017.mac
$Module:       Ценные бумаги
$Description:  не используется
*/
/* Операция внебиржевой покупки ц/б
   шаг генерации поручения клиента на сделку */

import InsCarryDoc, "sp_class.mac", "spserv.mac";

record Deal_Tick (dl_tick);

macro ExecuteStep( doc, FDoc)

  var  FD, dat;

  SetBuff( Deal_Tick, FDoc ); 
  FD = SPFirstDoc( Deal_Tick, IsBackExec(Deal_Tick, SP_EXECUTE_STEP_BUY) );

  GetOprDate( FD.GetKindDate(DATE_DEALDATE), dat );

  if( IsClientDeal(Deal_Tick) )
     if(not ФормПоручКлНаСделку(Deal_Tick, dat))
        return 1;
     end;
  end;

  return 0;
end;

