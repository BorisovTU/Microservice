/*
$Name:        sp_carou.mac
$Module:      Ценные бумаги
$Description: Процедуры для проводок по внебалансу в операциях с ценными бумагами
*/
IMPORT "sp_car.mac", "sp_grfun.mac";

/* Постановка сделки на внебаланс (для операций покупки/продажи)*/
MACRO ПоставитьНаВнебаланс( FD )

  if( IsClientDeal(FD.tick.rec) ) /*только собственные сделки */
     return 0;
  end;

  if( not ОбновитьСтатусЧастиСделки(FD.dl_leg, DL_LEG_OUTBAL) )
     msgbox("Ошибка при изменении статуса сделки");
     return 1;
  end;

  return 0;
END;
