/*                           
$Name:             settl049.mac
$Module:           Ценные бумаги
$Description:      Операция Расчеты на ОРЦБ - Формирование сводных проводок или поручений ДЕПО по платежам
*/
import "sp_carsd.mac";

macro ExecuteStep( Doc, adr )
   record comm( dl_comm );
   var    FD, DepParm;

   SetBuff( comm, adr );

   /*if( (DL_CustodyAccounting == DL_CUSTODYACCOUNTING_CUSTODY) )
      DepParm = TRecHandler( "dldepset.dbt" ); /*Параметры депозитарного учета*/
      if( not ПолучитьПараметрыДУ( DepParm, Comm.PartyID, Comm.MarketSchemeID ) )
         return 1;
      end;

      if( (DepParm.rec.Consolidate != DEPSET_CONSOLIDATE_NO) OR  /*нужны сводные поручения нашего банка*/
          (DepParm.rec.AddTransAcc == SET_CHAR) OR /*Поручение по наполнению транзитного счета*/
          (DepParm.rec.ClientConsolidate != DEPSET_CONSOLIDATE_NO) OR /*нужны сводные поручения клиентов*/
          (DepParm.rec.AddTransAccCln == SET_CHAR) /*Поручение по наполнению транзитного счета клиентов*/
        )
         if( ВыполнитьСводныеПлатежиДЕПО( comm, Doc ) != 0 )
            return 1;
         end;
      end;
   end; */

   return 0;
end;

