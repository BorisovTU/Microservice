/**
 @file 		run844.mac
 @brief 	Загрузка сделок по Указу 844

 #menu 
  - БО ЦБ\Ценные Бумаги\Сделки\Указ №844\Загрузка сделок в рамках Указа №844
                                                                                                                
 # tag                                                                                                          
 - code_type:GUI                                                                                                
                                                                                                                
*/
IMPORT BankInter;

PRIVATE MACRO  GetRelay ( p_RelayName: STRING )
  var ErrCode, FlagValue:bool;

  GetRegistryValue( p_RelayName, V_BOOL, FlagValue, ErrCode );
  if ( ErrCode != 0 )
     FlagValue = false;
  end;

  return FlagValue;
onError(erru)  
  return false;
END;

PRIVATE MACRO DoIt
  msgbox("run 844");
END;


PRIVATE MACRO CheckRelay
  var xRelayName: STRING = "SECUR\\BLOCKED_OTC_DEALS_IMPORT";
  var xRelayFlag: BOOL = GetRelay( xRelayName );
  if(not xRelayFlag)
    msgbox("Нет настройки \n'" + xRelayName + "'\n или ее значение = 'NO'");
  else
    DoIt();
  end;
end;

CheckRelay();




