/* Операция получения паев
   Шаг учета предварительных затрат */

import InsCarryDoc, "sp_class.mac", "sp_carcm.mac";

macro ExecuteStep( doc, FDoc)
  record deal(dl_tick);
  var    FD, dat;

  SetBuff( deal, FDoc );
  FD = SPFirstDoc( deal );

  if( not УчетПредварительныхЗатрат( FD, FD.DateArray[DATE_DEALDATE], Doc, deal.PREOUTLAY, deal.PREOUTLAYFIID ) )
     return 1;
  end;  

  return 0;
end;
