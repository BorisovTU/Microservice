/* Операция получения паев
   Шаг настройки операции           */
import InsCarryDoc, "sp_class.mac", "sp_car.mac";

macro executeParamStep( kind_oper, BOf_kind, FDoc, ID_Operation, ID_Step )

  record  deal(dl_tick);
  var     FD;

  SetBuff( deal, FDoc ); 
  FD = SPFirstDoc( deal, false, true );

  DefineOprDate( FD.GetKindDate(DATE_DEALDATE),        FD.DateArray[DATE_DEALDATE]   );
  DefineOprDate( FD.GetKindDate(DATE_DEALCOMISS),      FD.DateArray[DATE_DEALCOMISS] );

  /*статус лота меняем на инициализирован*/
  if( not ОбновитьСтатусЧастиСделки( FD.dl_leg, DL_LEG_INITIAL ) )
     msgbox("Ошибка при изменении статуса лота");
     return 1;
  end;

  return 0;
end;
                       
