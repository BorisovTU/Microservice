/*
$Name: ul_ibc_deal.mac
$Module: Универсальный загрузчик
$Description: Выходная структура сделки МБК
*/

IMPORT "globals.mac";

CLASS ABSOLUTE_PERCENT
  var
      Value       = Double(0);  //Значение абсолютной ставки
end;

CLASS DRIFT_PERCENT
  VAR
      IndexID     = 0,          //Идентификатор индекса
      TypeDate    = 0,          //Тип даты    
      CountDay    = 0,          //Количество дней
      Correct     = Double(0);  //Корректировка
END;

CLASS STANDART_PERCENT
  VAR
      RateKind    = 0;    //Идентификатор стандартной ставки
END;


CLASS UL_IBC_DEAL
  VAR
      DealType       = 0,                  //Вид сделки
      DealCode       = "",                 //Номер, под которым сделка будет зарегистрирована в бэк-офисе
      TradeSystem    = 0,                  //Идентификатор торговой системы
      DealCodeTS     = "",                 //Номер, присвоенный сделке в торговой системе
      OriginID       = 0,                  //Идентификатор приложения (комплекса), из которого поступила сделка
      LinkChannel    = 0,                  //Канал связи, по которому заключена сделка
      DealDate       = Date(0,0,0),        //Дата заключения сделки
      DealTime       = time(),             //Время заключения сделки
      Department     = {OperDprt},         //Идентификатор филиала, для которого вводится сделка
      NumberPack     = 0,                  //Номер пачки
      PartyID        = -1,                 //Идентификатор контрагента, с которым заключена сделка
      Start          = Date(0, 0, 0),      //Дата валютирования (начала) сделки
      IsSrok         = "",                 //Признак: сделка до востребования
      Duration       = 0,                  //Продолжительность процентного периода сделки в днях/Срок формирования платежей оплаты процентов
      Principal      = Money(0),           //Объём номинала (сумма) сделки
      Interest       = Money(0),           //Сумма процентов
      PFI            = -1,                 //Идентификатор валюты сделки
      TypePercent    = 0,                  //Тип используемой ставки: абсолютная, плавающая или стандартная.
      PercentData    = ABSOLUTE_PERCENT(), //Объект с данными для задания процентной ставки
                                           //ABSOLUTE_PERCENT, если TypePercent == 0
                                           //DRIFT_PERCENT, если TypePercent == 1
                                           //STANDART_PERCENT, если TypePercent == 2
      CalcID         = 0,                  //Идентификатор условия расчета
      Netting        = 0,                  //Признак участия сделки в неттинге
      Quality        = 0,                  //Признак обеспечения по ссуде
      ConfTpID       = 0,                  //Идентификатор транспорта отправки подтверждений
      DealCodePS     = "",                 //Код сделки в системе подтверждений
      TraderID       = -1,                 //Номер дилера, заключившего сделку
      BrokerID       = -1,                 //Идентификатор брокера
      TypeDoc        = "",                 //Системный тип сделки
      UserTypeDoc    = "",                 //Пользовательский тип сделки
      Comment        = "",                 //Комментарий
      IsTradeFinance = "",                 //Признак торгового финансирования
      PI             = "",                 //Платежная инструкция в свободном формате
      BankID         = -1;                 //ИД банка плательщика или получателя
END;
