/*
$Name:        dvcsa035.mac
$Module:      ФИССиКО
$Description: Сопровождение CSA: Подготовка оплаты процентов по CSA
*/
import "dv_car.mac";

PRIVATE VAR CSAPayment = TRecHandler("dvcsapm.dbt");

MACRO ExecuteStep( doc, FDoc, DocKind, ID_Operation, ID_Step )
    record csaBuf(dvcsa);
    SetBuff(csaBuf, FDoc);
    var FD = DVFirstCSA(DocKind, csaBuf.CSAID);
    
    return IIF(DV_RunPercentPaymentCSA(FD.CSA.rec.CSAID), 0, 1);
END;