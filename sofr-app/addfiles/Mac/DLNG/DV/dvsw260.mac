/*
$Name:        dvsw260.mac
$Module:      Производные инструменты
$Description: Ранние расчеты. Инициализация.
*/
import InsCarryDoc, "dv_categ.mac", "dv_car.mac", "dv_period.mac";

macro ExecuteStep( doc, FDoc, DocKind, ID_Operation, ID_Step )

  RECORD ndeal(dvndeal);
  VAR ДатаИсполненияШага, FD;

  SetBuff( ndeal, FDoc );

  FD = DVFirstDocNDeal(DocKind, ndeal, 2);
  if (FD.ОтказОтИсполнения())
     return 0;
  end;

  ДатаИсполненияШага = DV_GetPlanDateStep(ID_Operation, ID_Step);

  if ( АктуализироватьПлатежи(FD, ДатаИсполненияШага) != 0 )
     return 1;
  end;

  return 0;
end;