/*
$Name:             wlinfo.mac
$Module:           МБР
$Description:      Макрос скроллинга информационных сообщений (входящих)
*/

/****************************************************************************/
/*                   R-Style SoftWare Lab, RS-Bank 5.1                      */
/****************************************************************************/
/*                  Подсистема "Межбанковские расчеты"                      */
/*  Макрофункции для работы с информационными сообщениями (входящие)        */
/*                                                                          */
/*  Имя файла: wlinfo.mac                                                   */
/*  Создан:  04.12.02                                        Алешин А.В.    */
/****************************************************************************/

import "wlinfogt.mac";

macro Функция_Пользователя()
  return 0;
end;

MACRO УстановитьПодсказку( TableName:string, IndexNum:integer, DefaultHint:string, ScrolStates:integer ):string
  // Пример формируемой подсказки
  //    "/*+FIRST_ROWS LEADING(t)*/"
  // Возможные значения ScrolStates:
  //  WLD_LIST_INFIN_ALLSTAT  = 1            // Список всех сообщений
  //  WLD_LIST_INFIN_RECEIV   = 2            // Принятые
  //  WLD_LIST_INFIN_CONTROL  = 3            // Проконтролированные
  //  WLD_LIST_INFIN_CLOSED   = 4            // Обработанные
  return "/*+FIRST_ROWS LEADING(t)*/";

END;

/*В случае неудачи возвращает пустую строку*/
macro Текст_Ответа_По_Сверке_Счетов( 
CorsArr:TARRAY, FIIDArr:TARRAY, ReportDate:DATE, FirstSignID:INTEGER, 
SecondSignID:INTEGER, ExecutorID:INTEGER )

    Var RetStr = "", i = 0, str;

    /*Шапка*/
    RetStr = ПолучитьШапку( CorsArr(0), FIIDArr(0), ReportDate, 0, CorsArr.Size);
    if(not RetStr)
       return RetStr;
    end;
    while(i < CorsArr.Size)
        if(FIIDArr(i) == NATCUR)
            str = БлокА(CorsArr(i), ReportDate);
        else
            str = БлокБ(CorsArr(i), FIIDArr(i), ReportDate);
        end;
        if(str)
           RetStr = RetStr + Str;
        else
           return ""
        end;
        i = i + 1;
    end;
    str = Подписи(FirstSignID, SecondSignID, ExecutorID);
    if (not str)
       return "";
    end;
    RetStr = RetStr + str;  
    return RetStr;
end;
