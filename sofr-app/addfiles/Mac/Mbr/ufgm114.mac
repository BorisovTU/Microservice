/*
  $Name:         ufgm114.mac
  $Module:       Межбанковские расчеты
  $Description:  Генерация сообщения ED114 транспорта УФЭБС
*/

//-----------------------------------------------------------------------------
//          Автоматизированная банковская система RS-Bank               
//                 Copyright (c) R-Style Software Lab
//
// Подсистема   : Межбанковские расчеты
//
// Описание     : Генерация сообщения ED114 транспорта УФЭБС
//
// Программист  : Чукина Т.А.
//
// Создан       : 16.09.2014
//
//-----------------------------------------------------------------------------

import "uf113114genmes.mac", "pmtax.mac";

macro CheckPaym114( addr )
  SetBuff( wlpmpaym,  addr );
  var RsPaym : RsbPayment = RsbPayment( wlpmpaym.PaymentID );

  var err_msg : string = "", err : integer = 0;

  err = CheckPaym_113_114(addr, @err_msg, "ED114");

  if(not err)
    err = CheckTaxPropForUfebsMes(RsPaym, "ED114", @err_msg)
  end;

  if(err)
    MemoryError(err, err_msg);
    return false;
  end;

  return true;
end;

macro GenMes( addrMes, addrPm )
  return GenMes_113_114( addrMes, addrPm, "ED114" );
end;
