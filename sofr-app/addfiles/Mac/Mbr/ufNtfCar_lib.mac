/*
  $Name:         ufNtfCar_lib.mac
  $Module:       МБР
  $Description:  Константы и функции для уведомлений о зачислении/невозможности зачисления средств
*/

//-----------------------------------------------------------------------------
//          Автоматизированная банковская система RS-Bank               
//                 Copyright (c) R-Style Software Lab
//
// Подсистема   : Межбанковские расчеты
//
// Описание     : Константы и функции для уведомлений о зачислении/невозможности зачисления средств
//
// Программист  : Чукина Т.А.
//
// Создан       : 11.04.2018
//
//-----------------------------------------------------------------------------
import MesInter, "bnk_common.mac";

const ERR_WRONG_NEEDEXECNOTIFY : string = 
  "Нельзя сформировать уведомление. У платежа неподдерживаемое значение признака "
  "\"Требуется уведомление\"";

macro UfNtfCar_GetErrWrongReg(NeedExecNotify : integer) : string
  var ErrMsg : string = "Некорректные настройки формирования уведомления";

  if(NeedExecNotify == WLPM_EXECNOTIFY_SUCCESS)
    ErrMsg = ErrMsg + " о зачислении средств получателю";
  elif(NeedExecNotify == WLPM_EXECNOTIFY_FAIL)
    ErrMsg = ErrMsg + " о невозможности зачисления средств получателю";
  end;

  return ErrMsg;
end;

macro UfNtfCar_GetAnswerCodeSuccess
  var RegAnsCode : string = Bnk_GetRegistryValue
    ( "МЕЖБАНКОВСКИЕ РАСЧЕТЫ\\УФЭБС\\УВЕДОМЛЕНИЯ\\ЗАЧИСЛЕНИЕ\\КОД ОТВЕТА",
      V_STRING,
      "09"
    );

  return RegAnsCode;
end;

macro UfNtfCar_GetAnswerCodeFail
  var RegAnsCode : string = Bnk_GetRegistryValue
    ( "МЕЖБАНКОВСКИЕ РАСЧЕТЫ\\УФЭБС\\УВЕДОМЛЕНИЯ\\ЗАЧИСЛЕНИЕ НЕВОЗМОЖНО\\КОД ОТВЕТА",
      V_STRING,
      "19"
    );

  return RegAnsCode;
end;
