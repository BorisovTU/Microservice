IMPORT CTInter, SfInter;
IMPORT "cb_err.mac";


macro TestIt()

  var stat:integer = 0;
  var sa = TRecHandler("settacc.dbt");
  var found:bool = false;
  var xContractID: integer = 647734;

  file SfContr( "sfcontr.dbt") key 0;
  SfContr.Id = xContractID;
  if( not getEQ( SfContr ) )
    println("Не найден договор обслуживания: ", xContractID);
    return 1;
  end;

  stat = SfSelectSETTACC(0, OBJTYPE_SFCONTR, SfContr, sa, found);
  var xErrMsg:string = GetErrMsg();

  println("stat: "+string(stat)+", found: "+string(found));
  println("ErrMsg: " + xErrMsg);
  println("New ErrMsg: " + CB_ErrMsg(xErrMsg, 242657, 0));
  if(stat == 0)
     println("sa.setaccid: "+string(sa.setaccid));
  end;

end;


println("DEF-66627 start");
TestIt();
println("DEF-66627 end");
